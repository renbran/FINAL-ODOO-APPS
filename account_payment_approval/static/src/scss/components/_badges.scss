// Approval Status Badges and State Indicators
// Visual indicators for payment approval states

@import "../variables";

// Base badge styling
.o_approval_badge {
    display: inline-flex;
    align-items: center;
    padding: $spacer-xs $spacer-sm;
    font-size: $font-size-small;
    font-weight: $font-weight-medium;
    border-radius: $border-radius-pill;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: $transition-fast;

    .badge-icon {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        margin-right: $spacer-xs;
        background-color: currentColor;
    }

    // State-specific styling
    &.state-draft {
        @include approval-state-badge($state-draft);
    }

    &.state-submitted {
        @include approval-state-badge($state-submitted);
    }

    &.state-under-review {
        @include approval-state-badge($state-under-review);
    }

    &.state-approved {
        @include approval-state-badge($state-approved);
    }

    &.state-authorized {
        @include approval-state-badge($state-authorized);
    }

    &.state-posted {
        @include approval-state-badge($state-posted);
    }

    &.state-rejected {
        @include approval-state-badge($state-rejected);
    }

    &.state-cancelled {
        @include approval-state-badge($state-cancelled);
    }
}

// Urgency level badges
.o_urgency_badge {
    display: inline-flex;
    align-items: center;
    padding: $spacer-xs $spacer-sm;
    font-size: $font-size-small;
    font-weight: $font-weight-medium;
    border-radius: $border-radius;
    text-transform: uppercase;
    letter-spacing: 0.5px;

    .urgency-icon {
        margin-right: $spacer-xs;
        font-size: $font-size-small;
    }

    &.urgency-low {
        background-color: rgba($urgency-low, 0.1);
        color: $urgency-low;
        border: 1px solid rgba($urgency-low, 0.3);

        .urgency-icon:before {
            content: "▼";
        }
    }

    &.urgency-normal {
        background-color: rgba($urgency-normal, 0.1);
        color: $urgency-normal;
        border: 1px solid rgba($urgency-normal, 0.3);

        .urgency-icon:before {
            content: "●";
        }
    }

    &.urgency-high {
        background-color: rgba($urgency-high, 0.1);
        color: $urgency-high;
        border: 1px solid rgba($urgency-high, 0.3);

        .urgency-icon:before {
            content: "▲";
        }
    }

    &.urgency-urgent {
        background-color: rgba($urgency-urgent, 0.1);
        color: $urgency-urgent;
        border: 1px solid rgba($urgency-urgent, 0.3);
        animation: pulse-urgent 2s infinite;

        .urgency-icon:before {
            content: "⚠";
        }
    }
}

// Status progress indicator
.o_approval_progress {
    display: flex;
    align-items: center;
    margin: $spacer-md 0;

    .progress-step {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex: 1;
        position: relative;

        &:not(:last-child):after {
            content: "";
            position: absolute;
            top: 16px;
            left: 50%;
            width: 100%;
            height: 2px;
            background: $border-color-light;
            z-index: 1;
        }

        .step-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #ffffff;
            border: 2px solid $border-color-light;
            margin-bottom: $spacer-sm;
            z-index: 2;
            position: relative;
            transition: $transition-base;

            .step-icon {
                font-size: $font-size-small;
                color: #6c757d;
            }
        }

        .step-label {
            font-size: $font-size-small;
            color: #6c757d;
            text-align: center;
            font-weight: $font-weight-medium;
        }

        // Active step
        &.active {
            .step-circle {
                border-color: $osus-primary;
                background: $osus-primary;

                .step-icon {
                    color: #ffffff;
                }
            }

            .step-label {
                color: $osus-primary;
                font-weight: $font-weight-semibold;
            }
        }

        // Completed step
        &.completed {
            .step-circle {
                border-color: $state-approved;
                background: $state-approved;

                .step-icon {
                    color: #ffffff;
                }

                .step-icon:before {
                    content: "✓";
                }
            }

            .step-label {
                color: $state-approved;
            }

            &:not(:last-child):after {
                background: $state-approved;
            }
        }

        // Rejected step
        &.rejected {
            .step-circle {
                border-color: $state-rejected;
                background: $state-rejected;

                .step-icon {
                    color: #ffffff;
                }

                .step-icon:before {
                    content: "✗";
                }
            }

            .step-label {
                color: $state-rejected;
            }
        }
    }
}

// Approval tier indicators
.o_approval_tier {
    display: inline-flex;
    align-items: center;
    padding: $spacer-xs $spacer-sm;
    background: rgba($osus-primary, 0.1);
    border: 1px solid rgba($osus-primary, 0.3);
    border-radius: $border-radius;
    font-size: $font-size-small;
    font-weight: $font-weight-medium;
    color: $osus-primary;

    .tier-icon {
        margin-right: $spacer-xs;

        &:before {
            content: "⚪";
        }
    }

    &.tier-1 .tier-icon:before {
        content: "①";
    }
    &.tier-2 .tier-icon:before {
        content: "②";
    }
    &.tier-3 .tier-icon:before {
        content: "③";
    }
    &.tier-4 .tier-icon:before {
        content: "④";
    }
    &.tier-5 .tier-icon:before {
        content: "⑤";
    }
    &.tier-6 .tier-icon:before {
        content: "⑥";
    }
}

// Amount threshold indicators
.o_amount_indicator {
    display: inline-flex;
    align-items: center;
    font-size: $font-size-base;
    font-weight: $font-weight-semibold;

    .amount-value {
        color: $osus-dark;
    }

    .amount-currency {
        margin-left: $spacer-xs;
        color: #6c757d;
        font-weight: $font-weight-normal;
    }

    .amount-threshold {
        margin-left: $spacer-sm;
        padding: $spacer-xs $spacer-sm;
        background: rgba($osus-warning, 0.1);
        border: 1px solid rgba($osus-warning, 0.3);
        border-radius: $border-radius;
        font-size: $font-size-small;
        color: $osus-warning;

        &.above-threshold {
            background: rgba($urgency-urgent, 0.1);
            border-color: rgba($urgency-urgent, 0.3);
            color: $urgency-urgent;
        }

        &.below-threshold {
            background: rgba($state-approved, 0.1);
            border-color: rgba($state-approved, 0.3);
            color: $state-approved;
        }
    }
}

// Time-based indicators
.o_time_indicator {
    display: inline-flex;
    align-items: center;
    font-size: $font-size-small;
    color: #6c757d;

    .time-icon {
        margin-right: $spacer-xs;
        font-size: $font-size-small;
    }

    &.overdue {
        color: $state-rejected;
        font-weight: $font-weight-semibold;

        .time-icon:before {
            content: "⏰";
        }
    }

    &.due-soon {
        color: $urgency-high;
        font-weight: $font-weight-medium;

        .time-icon:before {
            content: "⏳";
        }
    }

    &.on-time {
        color: $state-approved;

        .time-icon:before {
            content: "✓";
        }
    }
}

// Animations
@keyframes pulse-urgent {
    0% {
        box-shadow: 0 0 0 0 rgba($urgency-urgent, 0.7);
    }
    70% {
        box-shadow: 0 0 0 10px rgba($urgency-urgent, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba($urgency-urgent, 0);
    }
}

// Mobile responsive adjustments
@include media-breakpoint-down(md) {
    .o_approval_progress {
        .progress-step {
            .step-label {
                font-size: $font-size-small;
                line-height: $line-height-compact;
            }
        }
    }

    .o_amount_indicator {
        flex-direction: column;
        align-items: flex-start;

        .amount-threshold {
            margin-left: 0;
            margin-top: $spacer-xs;
        }
    }
}
