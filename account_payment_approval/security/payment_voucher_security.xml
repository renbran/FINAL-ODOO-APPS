<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Payment Voucher Security Groups -->
    <record id="module_category_payment_voucher" model="ir.module.category">
        <field name="name">Payment Voucher System</field>
        <field name="description">Enhanced Payment Voucher Management</field>
        <field name="sequence">15</field>
    </record>

    <!-- User Groups -->
    <record id="group_payment_voucher_user" model="res.groups">
        <field name="name">Payment Voucher User</field>
        <field name="category_id" ref="module_category_payment_voucher"/>
        <field name="comment">Can create and view payment vouchers</field>
    </record>

    <record id="group_payment_voucher_reviewer" model="res.groups">
        <field name="name">Payment Voucher Reviewer</field>
        <field name="category_id" ref="module_category_payment_voucher"/>
        <field name="implied_ids" eval="[(4, ref('group_payment_voucher_user'))]"/>
        <field name="comment">Can review and validate payment vouchers</field>
    </record>

    <record id="group_payment_voucher_approver" model="res.groups">
        <field name="name">Payment Voucher Approver</field>
        <field name="category_id" ref="module_category_payment_voucher"/>
        <field name="implied_ids" eval="[(4, ref('group_payment_voucher_reviewer'))]"/>
        <field name="comment">Can approve payment vouchers</field>
    </record>

    <record id="group_payment_voucher_authorizer" model="res.groups">
        <field name="name">Payment Voucher Authorizer</field>
        <field name="category_id" ref="module_category_payment_voucher"/>
        <field name="implied_ids" eval="[(4, ref('group_payment_voucher_approver'))]"/>
        <field name="comment">Can authorize payment vouchers for posting</field>
    </record>

    <record id="group_payment_voucher_manager" model="res.groups">
        <field name="name">Payment Voucher Manager</field>
        <field name="category_id" ref="module_category_payment_voucher"/>
        <field name="implied_ids" eval="[(4, ref('group_payment_voucher_authorizer'))]"/>
        <field name="comment">Full payment voucher management access</field>
    </record>

    <record id="group_payment_voucher_admin" model="res.groups">
        <field name="name">Payment Voucher Administrator</field>
        <field name="category_id" ref="module_category_payment_voucher"/>
        <field name="implied_ids" eval="[(4, ref('group_payment_voucher_manager'))]"/>
        <field name="comment">Payment voucher system administration</field>
    </record>

    <!-- Record Rules -->
    <record id="payment_voucher_user_rule" model="ir.rule">
        <field name="name">Payment Voucher: User Access</field>
        <field name="model_id" ref="account.model_account_payment"/>
        <field name="domain_force">[('company_id', 'in', company_ids)]</field>
        <field name="groups" eval="[(4, ref('group_payment_voucher_user'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>

    <record id="payment_voucher_manager_rule" model="ir.rule">
        <field name="name">Payment Voucher: Manager Full Access</field>
        <field name="model_id" ref="account.model_account_payment"/>
        <field name="domain_force">[('company_id', 'in', company_ids)]</field>
        <field name="groups" eval="[(4, ref('group_payment_voucher_manager'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="1"/>
    </record>

    <!-- QR Verification Model Rules -->
    <record id="qr_verification_public_rule" model="ir.rule">
        <field name="name">QR Verification: Public Read Access</field>
        <field name="model_id" ref="model_payment_voucher_qr_verification"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('base.group_public'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_unlink" eval="0"/>
    </record>

    <!-- Digital Signature Model Rules -->
    <record id="signature_user_rule" model="ir.rule">
        <field name="name">Digital Signature: User Access</field>
        <field name="model_id" ref="model_payment_voucher_signature"/>
        <field name="domain_force">[('company_id', 'in', company_ids)]</field>
        <field name="groups" eval="[(4, ref('group_payment_voucher_user'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>
</odoo>
