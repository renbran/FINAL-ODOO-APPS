<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Demo File Upload Data -->
    <record id="demo_file_attachment_1" model="file.attachment.enhancement">
        <field name="name">Sample_Invoice_Template.pdf</field>
        <field name="description">Sample invoice template for reference</field>
        <field name="user_id" ref="base.user_admin"/>
        <field name="access_level">public</field>
        <field name="related_model">res.users</field>
        <field name="related_record_id" ref="base.user_admin"/>
    </record>

    <record id="demo_file_attachment_2" model="file.attachment.enhancement">
        <field name="name">Company_Policies.docx</field>
        <field name="description">Updated company policies document</field>
        <field name="user_id" ref="base.user_admin"/>
        <field name="access_level">internal</field>
        <field name="related_model">res.users</field>
        <field name="related_record_id" ref="base.user_admin"/>
    </record>

    <!-- Sample Sale Order with Enhanced References -->
    <record id="demo_sale_order_enhanced" model="sale.order">
        <field name="name">SO001-ENHANCED</field>
        <field name="partner_id" ref="base.res_partner_12"/>
        <field name="client_order_ref">CLIENT-REF-2024-001</field>
        <field name="reference_priority">high</field>
        <field name="order_reference_notes">High priority order for Q1 delivery. Client requires special handling and expedited processing.</field>
        <field name="state">draft</field>
    </record>

    <!-- Sample Invoice with Enhanced References -->
    <record id="demo_invoice_enhanced" model="account.move">
        <field name="name">INV001-ENHANCED</field>
        <field name="partner_id" ref="base.res_partner_12"/>
        <field name="move_type">out_invoice</field>
        <field name="ref">CUST-REF-2024-001</field>
        <field name="reference_source">manual</field>
        <field name="reference_validated">True</field>
        <field name="reference_validation_date" eval="datetime.now()"/>
        <field name="state">draft</field>
    </record>

    <!-- File Upload Configuration Data -->
    <record id="file_upload_config" model="ir.config_parameter">
        <field name="key">frontend_enhancement.max_file_size_mb</field>
        <field name="value">50</field>
    </record>

    <record id="file_upload_allowed_types" model="ir.config_parameter">
        <field name="key">frontend_enhancement.allowed_file_types</field>
        <field name="value">.pdf,.doc,.docx,.xls,.xlsx,.txt,.jpg,.jpeg,.png,.gif,.zip,.rar</field>
    </record>

    <!-- Email Templates for File Upload Notifications -->
    <record id="email_template_file_upload" model="mail.template">
        <field name="name">File Upload Notification</field>
        <field name="model_id" ref="model_file_attachment_enhancement"/>
        <field name="subject">New File Uploaded: ${object.name}</field>
        <field name="body_html" type="html">
            <div style="margin: 0px; padding: 0px;">
                <div style="margin: 0px; padding: 0px; font-family: 'Segoe UI', Arial, sans-serif;">
                    <h2 style="color: #1f4788;">File Upload Notification</h2>
                    <p>Hello,</p>
                    <p>A new file has been uploaded to your account:</p>
                    <ul>
                        <li>
                            <strong>File Name:</strong> ${object.name}</li>
                        <li>
                            <strong>Description:</strong> ${object.description or 'No description provided'}</li>
                        <li>
                            <strong>Upload Date:</strong> ${object.upload_date}</li>
                        <li>
                            <strong>File Size:</strong> ${object.get_human_readable_size()}</li>
                        <li>
                            <strong>Uploaded By:</strong> ${object.user_id.name}</li>
                    </ul>
                    <p>You can access your files through the portal or contact support if you need assistance.</p>
                    <hr/>
                    <p style="font-size: 12px; color: #666;">
                        This is an automated notification from the OSUS Properties File Management System.
                    </p>
                </div>
            </div>
        </field>
        <field name="auto_delete">True</field>
    </record>

    <!-- Server Actions for Bulk Operations -->
    <record id="action_server_validate_all_references" model="ir.actions.server">
        <field name="name">Validate All References</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="binding_model_id" ref="account.model_account_move"/>
        <field name="state">code</field>
        <field name="code">
            for record in records:
                if record.ref and not record.reference_validated:
                    record.action_validate_reference()
        </field>
    </record>

    <!-- Cron Job for File Cleanup -->
    <record id="cron_cleanup_inactive_files" model="ir.cron">
        <field name="name">Cleanup Inactive File Attachments</field>
        <field name="model_id" ref="model_file_attachment_enhancement"/>
        <field name="state">code</field>
        <field name="code">
            # Clean up files inactive for more than 30 days
            inactive_files = env['file.attachment.enhancement'].search([
                ('is_active', '=', False),
                ('write_date', '&lt;', fields.Datetime.now() - timedelta(days=30))
            ])
            inactive_files.unlink()
        </field>
        <field name="interval_number">1</field>
        <field name="interval_type">weeks</field>
        <field name="numbercall">-1</field>
        <field name="active">True</field>
    </record>
</odoo>
