<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Security Groups -->
    <record id="group_property_user" model="res.groups">
        <field name="name">Property / User</field>
        <field name="category_id" ref="base.module_category_sales_sales"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>
    
    <record id="group_property_manager" model="res.groups">
        <field name="name">Property / Manager</field>
        <field name="category_id" ref="base.module_category_sales_sales"/>
        <field name="implied_ids" eval="[(4, ref('group_property_user'))]"/>
        <field name="users" eval="[(4, ref('base.user_root')), (4, ref('base.user_admin'))]"/>
    </record>
    
    <record id="group_commission_user" model="res.groups">
        <field name="name">Commission / User</field>
        <field name="category_id" ref="base.module_category_sales_sales"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>
    
    <record id="group_commission_manager" model="res.groups">
        <field name="name">Commission / Manager</field>
        <field name="category_id" ref="base.module_category_sales_sales"/>
        <field name="implied_ids" eval="[(4, ref('group_commission_user'))]"/>
        <field name="users" eval="[(4, ref('base.user_root')), (4, ref('base.user_admin'))]"/>
    </record>
    
    <!-- Record Rules -->
    <record id="property_comp_rule" model="ir.rule">
        <field name="name">Property multi-company</field>
        <field name="model_id" ref="model_property_property"/>
        <field name="global" eval="True"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>
    
    <record id="property_offer_comp_rule" model="ir.rule">
        <field name="name">Property Offer multi-company</field>
        <field name="model_id" ref="model_property_offer"/>
        <field name="global" eval="True"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>
    
    <record id="property_sale_comp_rule" model="ir.rule">
        <field name="name">Property Sale multi-company</field>
        <field name="model_id" ref="model_property_sale"/>
        <field name="global" eval="True"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>
    
    <record id="broker_commission_comp_rule" model="ir.rule">
        <field name="name">Broker Commission multi-company</field>
        <field name="model_id" ref="model_broker_commission_invoice"/>
        <field name="global" eval="True"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>
    
    <record id="internal_commission_comp_rule" model="ir.rule">
        <field name="name">Internal Commission multi-company</field>
        <field name="model_id" ref="model_internal_commission"/>
        <field name="global" eval="True"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>
    
    <record id="commission_rule_comp_rule" model="ir.rule">
        <field name="name">Commission Rule multi-company</field>
        <field name="model_id" ref="model_commission_rule"/>
        <field name="global" eval="True"/>
        <field name="domain_force">['|', ('company_id', '=', False), ('company_id', 'in', company_ids)]</field>
    </record>
    
    <!-- Property User Access -->
    <record id="property_user_own_access" model="ir.rule">
        <field name="name">Property User Own Access</field>
        <field name="model_id" ref="model_property_property"/>
        <field name="domain_force">[('create_uid', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_property_user'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>
    
    <!-- Property Manager Full Access -->
    <record id="property_manager_full_access" model="ir.rule">
        <field name="name">Property Manager Full Access</field>
        <field name="model_id" ref="model_property_property"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_property_manager'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="1"/>
    </record>
    
    <!-- Property Offer User Access -->
    <record id="offer_user_own_access" model="ir.rule">
        <field name="name">Property Offer User Own Access</field>
        <field name="model_id" ref="model_property_offer"/>
        <field name="domain_force">[('create_uid', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_property_user'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>
    
    <!-- Property Offer Manager Full Access -->
    <record id="offer_manager_full_access" model="ir.rule">
        <field name="name">Property Offer Manager Full Access</field>
        <field name="model_id" ref="model_property_offer"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_property_manager'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="1"/>
    </record>
    
    <!-- Property Sale User Access -->
    <record id="sale_user_own_access" model="ir.rule">
        <field name="name">Property Sale User Own Access</field>
        <field name="model_id" ref="model_property_sale"/>
        <field name="domain_force">[('create_uid', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_property_user'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>
    
    <!-- Property Sale Manager Full Access -->
    <record id="sale_manager_full_access" model="ir.rule">
        <field name="name">Property Sale Manager Full Access</field>
        <field name="model_id" ref="model_property_sale"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_property_manager'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="1"/>
    </record>
    
    <!-- Commission User Access -->
    <record id="broker_commission_user_access" model="ir.rule">
        <field name="name">Broker Commission User Access</field>
        <field name="model_id" ref="model_broker_commission_invoice"/>
        <field name="domain_force">[('create_uid', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_commission_user'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="0"/>
    </record>
    
    <!-- Commission Manager Full Access -->
    <record id="broker_commission_manager_access" model="ir.rule">
        <field name="name">Broker Commission Manager Access</field>
        <field name="model_id" ref="model_broker_commission_invoice"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_commission_manager'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="1"/>
    </record>
    
    <!-- Internal Commission User Access -->
    <record id="internal_commission_user_access" model="ir.rule">
        <field name="name">Internal Commission User Access</field>
        <field name="model_id" ref="model_internal_commission"/>
        <field name="domain_force">[('sales_person_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_commission_user'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="0"/>
        <field name="perm_create" eval="0"/>
        <field name="perm_unlink" eval="0"/>
    </record>
    
    <!-- Internal Commission Manager Full Access -->
    <record id="internal_commission_manager_access" model="ir.rule">
        <field name="name">Internal Commission Manager Access</field>
        <field name="model_id" ref="model_internal_commission"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_commission_manager'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="1"/>
    </record>
    
    <!-- Commission Rule Access - Only Manager -->
    <record id="commission_rule_manager_access" model="ir.rule">
        <field name="name">Commission Rule Manager Access</field>
        <field name="model_id" ref="model_commission_rule"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_commission_manager'))]"/>
        <field name="perm_read" eval="1"/>
        <field name="perm_write" eval="1"/>
        <field name="perm_create" eval="1"/>
        <field name="perm_unlink" eval="1"/>
    </record>
</odoo>
