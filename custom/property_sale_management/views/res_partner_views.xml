<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Form View Extension -->
    <record id="view_partner_form_inherit" model="ir.ui.view">
        <field name="name">res.partner.form.inherit.property.management</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <!-- Header Buttons -->
            <xpath expr="//sheet" position="before">
                <header>
                    <button name="action_add_blacklist" 
                            type="object"
                            class="oe_highlight btn-danger"
                            string="Blacklist Partner"
                            options="{'invisible': [('blacklisted','=', True)]}"
                            help="Add this partner to the blacklist"/>
                    <button name="action_remove_blacklist" 
                            type="object"
                            class="btn-success"
                            string="Remove from Blacklist"
                            options="{'invisible': [('blacklisted','=', False)]}"
                            help="Remove this partner from the blacklist"/>
                </header>
            </xpath>

            <!-- Blacklist Info Page -->
            <xpath expr="//page[@name='sales_purchases']" position="after">
                <page string="Blacklist Info" options="{'invisible': [('blacklisted','=', False)]}">
                    <group>
                        <field name="blacklisted" widget="boolean_button"/>
                        <field name="blacklist_date" readonly="1"/>
                        <field name="blacklist_reason" required="1"/>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <!-- Tree View Extension -->
    <record id="view_partner_tree_inherit" model="ir.ui.view">
        <field name="name">res.partner.tree.inherit.blacklist</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='phone']" position="after">
                <field name="blacklisted" widget="boolean_fa" 
                       options="{'fa_unchecked': 'fa-circle-o', 'fa_checked': 'fa-ban'}"/>
            </xpath>
        </field>
    </record>
</odoo>