<template id="report_invoice_custom" inherit_id="account.report_invoice_document">
    <xpath expr="//div[@class='page']" position="replace">
        <div class="page">
            <!-- Header -->
            <div class="header">
                <div class="header-content">
                    <div class="company-info">
                        <img src="/web/image/res.company/%(o.company_id.id)s/logo" alt="Company Logo" height="70" />
                        <h2><span t-field="o.company_id.name"/></h2>
                        <p><span t-field="o.company_id.street"/></p>
                        <p><span t-field="o.company_id.city"/>, <span t-field="o.company_id.state_id.name"/> <span t-field="o.company_id.zip"/></p>
                        <p><span t-field="o.company_id.country_id.name"/></p>
                        <p>VAT: <span t-field="o.company_id.vat"/></p>
                    </div>
                    <div>
                        <div class="document-title">INVOICE</div>
                        <div class="document-number"><span t-field="o.name"/></div>
                    </div>
                </div>
            </div>
            
            <!-- Customer and Invoice Information -->
            <div class="info-section">
                <div class="info-block">
                    <h3>BILL TO</h3>
                    <p><span t-field="o.partner_id.name"/></p>
                    <p><span t-field="o.partner_id.street"/></p>
                    <p><span t-field="o.partner_id.city"/>, <span t-field="o.partner_id.state_id.name"/> <span t-field="o.partner_id.zip"/></p>
                    <p><span t-field="o.partner_id.country_id.name"/></p>
                    <p t-if="o.partner_id.vat">VAT: <span t-field="o.partner_id.vat"/></p>
                </div>
                <div class="info-block">
                    <h3>INVOICE DETAILS</h3>
                    <table style="width: 100%">
                        <tr>
                            <td><strong>Invoice Date:</strong></td>
                            <td><span t-field="o.invoice_date"/></td>
                        </tr>
                        <tr>
                            <td><strong>Due Date:</strong></td>
                            <td><span t-field="o.invoice_date_due"/></td>
                        </tr>
                        <tr>
                            <td><strong>Delivery Date:</strong></td>
                            <td><span t-field="o.invoice_date"/></td>
                        </tr>
                        <tr>
                            <td><strong>Reference:</strong></td>
                            <td><span t-field="o.name"/></td>
                        </tr>
                        <tr>
                            <td><strong>Source:</strong></td>
                            <td><span t-field="o.invoice_origin"/></td>
                        </tr>
                    </table>
                </div>
            </div>
            
            <!-- Invoice Lines -->
            <table class="main-table">
                <thead>
                    <tr>
                        <th>Description</th>
                        <th class="text-end">Quantity</th>
                        <th class="text-end">Unit Price</th>
                        <th class="text-end">Discount</th>
                        <th class="text-end">Taxes</th>
                        <th class="text-end">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <tr t-foreach="o.invoice_line_ids" t-as="line">
                        <td><span t-field="line.name"/></td>
                        <td class="text-end"><span t-field="line.quantity"/></td>
                        <td class="text-end"><span t-field="line.price_unit"/></td>
                        <td class="text-end"><span t-field="line.discount"/>%</td>
                        <td class="text-end">
                            <span t-esc="', '.join(t.tax_id.name for t in line.tax_ids)"/>
                        </td>
                        <td class="text-end"><span t-field="line.price_subtotal"/></td>
                    </tr>
                    <tr class="note-row">
                        <td colspan="6">A note, whose content usually applies to the section or product above.</td>
                    </tr>
                </tbody>
            </table>
            
            <!-- Summary Section -->
            <div class="summary-section">
                <table class="summary-table">
                    <tr>
                        <td>Untaxed Amount:</td>
                        <td class="text-end"><span t-field="o.amount_untaxed"/></td>
                    </tr>
                    <tr>
                        <td>Tax 15%:</td>
                        <td class="text-end"><span t-field="o.amount_tax"/></td>
                    </tr>
                    <tr class="total-row">
                        <td>Total:</td>
                        <td class="text-end"><span t-field="o.amount_total"/></td>
                    </tr>
                    <tr class="amount-due">
                        <td>Amount Due:</td>
                        <td class="text-end"><span t-field="o.amount_residual"/></td>
                    </tr>
                </table>
            </div>
            
            <div class="amount-words">
                <strong>Amount in Words:</strong> <span t-field="o.amount_in_words"/>
            </div>
            
            <!-- Serial Number Table -->
            <h3>Serial Numbers / Lot Numbers</h3>
            <table class="sn-table">
                <thead>
                    <tr>
                        <th>Product</th>
                        <th class="text-end">Quantity</th>
                        <th>SN/LN</th>
                    </tr>
                </thead>
                <tbody>
                    <tr t-foreach="o.invoice_line_ids" t-as="line">
                        <td><span t-field="line.product_id.name"/></td>
                        <td class="text-end"><span t-field="line.quantity"/></td>
                        <td>
                            <span t-esc="', '.join(l.name for l in line.lot_ids)"/>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <!-- Payment Information -->
            <div class="payment-info">
                <h3>PAYMENT INFORMATION</h3>
                <p>Payment within <span t-field="o.invoice_payment_term_id.name"/> calendar day</p>
                <p>1 - Installment of <span t-field="o.amount_total"/> due on <span t-field="o.invoice_date_due"/></p>
                <p>Payment Communication: <strong><span t-field="o.payment_reference"/></strong></p>
            </div>
            
            <!-- QR Code -->
            <div class="qr-section">
                <div class="qr-code">
                    <img t-att-src="o.get_payment_qr_code_url()"/>
                </div>
                <div class="qr-text">
                    <p>Scan this QR Code to<br>pay with your mobile</p>
                </div>
            </div>
            
            <!-- Footer -->
            <div class="footer">
                <p>Thank you for your business!</p>
                <p><span t-field="o.company_id.name"/></p>
                <p>Email: <span t-field="o.company_id.email"/> | Phone: <span t-field="o.company_id.phone"/></p>
            </div>
        </div>
    </xpath>
</template>