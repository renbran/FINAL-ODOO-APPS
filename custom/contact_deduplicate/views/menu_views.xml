<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Main Menu -->
    <menuitem id="menu_contact_deduplicate_root"
              name="Contact Deduplication"
              sequence="90"
              groups="base.group_user"/>

    <!-- Duplicates Submenu -->
    <menuitem id="menu_contact_duplicates"
              name="Duplicates"
              parent="menu_contact_deduplicate_root"
              action="action_contact_duplicate"
              sequence="10"/>

    <!-- Merge History Submenu -->
    <menuitem id="menu_contact_merge_history"
              name="Merge History"
              parent="menu_contact_deduplicate_root"
              action="action_contact_merge_history"
              sequence="20"/>

    <!-- Configuration Submenu -->
    <menuitem id="menu_contact_deduplicate_config"
              name="Configuration"
              parent="menu_contact_deduplicate_root"
              sequence="90"/>

    <!-- Batch Operations Action -->
    <record id="action_batch_find_duplicates" model="ir.actions.server">
        <field name="name">Find All Duplicates</field>
        <field name="model_id" ref="base.model_res_partner"/>
        <field name="binding_model_id" ref="base.model_res_partner"/>
        <field name="state">code</field>
        <field name="code">
if records:
    action = records.find_all_duplicates()
        </field>
    </record>

    <!-- Batch Operations Submenu -->
    <menuitem id="menu_batch_operations"
              name="Batch Operations"
              parent="menu_contact_deduplicate_config"
              sequence="10"/>

    <!-- Add actions to Partners menu -->
    <menuitem id="menu_partners_with_duplicates"
              name="Contacts with Duplicates"
              parent="contacts.menu_contacts"
              action="contacts.action_contacts"
              sequence="15"/>

</odoo>
