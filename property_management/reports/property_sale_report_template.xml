<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- PDF report action for Property Offer -->
    <record id="action_report_property_offer" model="ir.actions.report">
        <field name="name">Property Offer Report</field>
        <field name="model">property.sale.offer</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">property_sale_management.property_offer_report_template</field>
        <field name="report_file">property_sale_management.property_offer_report_template</field>
        <field name="binding_model_id" ref="model_property_sale_offer"/>
        <field name="binding_type">report</field>
    </record>

    <template id="property_offer_report_template">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div class="page">
                    <!-- Header Section -->
                    <div class="row mb-4">
                        <div class="col-6">
                            <h2>Property Offer</h2>
                            <p>Reference: <span t-field="doc.name"/></p>
                        </div>
                        <div class="col-6 text-right">
                            <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height: 45px;" alt="Logo"/>
                        </div>
                    </div>

                    <!-- Offer Information -->
                    <div class="row mb-4">
                        <div class="col-6">
                            <strong>Customer:</strong>
                            <address>
                                <span t-field="doc.partner_id.name"/><br/>
                                <span t-field="doc.partner_id.street"/><br/>
                                <span t-field="doc.partner_id.city"/>, <span t-field="doc.partner_id.state_id.name"/> <span t-field="doc.partner_id.zip"/><br/>
                                <span t-field="doc.partner_id.country_id.name"/><br/>
                                <t t-if="doc.partner_id.phone">
                                    Phone: <span t-field="doc.partner_id.phone"/>
                                </t>
                            </address>
                        </div>
                        <div class="col-6">
                            <strong>Property:</strong>
                            <p><span t-field="doc.property_id.name"/></p>
                            <strong>Offer Date:</strong>
                            <p><span t-field="doc.offer_date"/></p>
                            <strong>Expiration Date:</strong>
                            <p><span t-field="doc.expiration_date"/></p>
                            <strong>Status:</strong>
                            <p><span t-field="doc.state"/></p>
                        </div>
                    </div>

                    <!-- Offer Details -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <table class="table table-sm">
                                <tr>
                                    <th>Property List Price</th>
                                    <td><span t-field="doc.property_price" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/></td>
                                </tr>
                                <tr>
                                    <th>Offer Price</th>
                                    <td><span t-field="doc.offer_price" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/></td>
                                </tr>
                                <tr>
                                    <th>Price Difference</th>
                                    <td>
                                        <span t-field="doc.price_difference" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
                                        (<span t-field="doc.price_difference_percent"/>%)
                                    </td>
                                </tr>
                                <tr>
                                    <th>Down Payment</th>
                                    <td><span t-field="doc.down_payment" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/></td>
                                </tr>
                                <tr>
                                    <th>DLD Fee</th>
                                    <td><span t-field="doc.dld_fee" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/></td>
                                </tr>
                                <tr>
                                    <th>Admin Fee</th>
                                    <td><span t-field="doc.admin_fee" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/></td>
                                </tr>
                                <tr>
                                    <th>Broker Commission</th>
                                    <td>
                                        <span t-field="doc.broker_commission_amount" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
                                        (<span t-field="doc.broker_commission_percentage"/>%)
                                    </td>
                                </tr>
                                <tr class="border-black o_total">
                                    <th><strong>Total Offer Amount</strong></th>
                                    <td><strong><span t-field="doc.total_offer_amount" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/></strong></td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!-- Payment Terms -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <strong>Payment Terms:</strong>
                            <p t-field="doc.payment_terms"/>
                        </div>
                    </div>

                    <!-- Terms and Conditions -->
                    <div class="row">
                        <div class="col-12">
                            <strong>Terms &amp; Conditions:</strong>
                            <p t-field="doc.terms_conditions"/>
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </template>
</odoo>