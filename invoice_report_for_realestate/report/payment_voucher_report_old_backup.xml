<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Unified Smart Payment Voucher Template -->
    <template id="report_payment_voucher_document">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="payment">
                <!-- PAGE 1: Primary Payment Voucher (Always Shown) -->
                <div class="page" style="font-family: Arial, sans-serif; color: #333; background: #ffffff; padding: 5px; line-height: 1.4;">
                    <style>
                        @page { 
                            margin: 3mm; 
                            size: A4; 
                        }
                        
                        .voucher-container { 
                            font-family: Arial, sans-serif; 
                            font-size: 14px;
                            line-height: 1.4;
                            color: #333;
                        }
                        
                        .company-header {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            padding: 15px 0;
                            margin-bottom: 10px;
                            border-bottom: 3px solid #7d1538;
                        }
                        
                        .company-logo {
                            width: 80px;
                            height: 80px;
                            object-fit: contain;
                        }
                        
                        .company-details {
                            text-align: right;
                            font-size: 11px;
                            line-height: 1.5;
                            color: #333;
                        }
                        
                        .company-name {
                            font-weight: bold;
                            font-size: 13px;
                            margin-bottom: 3px;
                        }
                        
                        .company-footer {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            padding: 10px 0;
                            margin-top: 10px;
                            border-top: 3px solid #7d1538;
                            font-size: 10px;
                            color: #7d1538;
                        }
                        
                        .footer-contact {
                            text-align: left;
                        }
                        
                        .footer-website {
                            text-align: center;
                            font-weight: bold;
                            font-size: 12px;
                        }
                        
                        .footer-disclaimer {
                            text-align: right;
                            font-style: italic;
                        }

                        .header-section {
                            background: linear-gradient(135deg, #7d1538, #5a0f28);
                            color: white;
                            padding: 12px;
                            margin-bottom: 15px;
                            border-radius: 5px;
                        }

                        .header-table {
                            width: 100%;
                            border-collapse: collapse;
                        }

                        .qr-container {
                            display: flex;
                            align-items: center;
                            gap: 10px;
                        }

                        .qr-box {
                            background: white;
                            border: 2px solid #333;
                            border-radius: 4px;
                            padding: 4px;
                            width: 55px;
                            height: 55px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                        }
                        
                        .qr-box img {
                            width: 45px;
                            height: 45px;
                            object-fit: contain;
                        }

                        .qr-text {
                            font-size: 11px;
                            font-weight: bold;
                            color: white;
                        }

                        .voucher-title {
                            font-size: 24px;
                            font-weight: bold;
                            text-transform: uppercase;
                            margin-bottom: 5px;
                            text-align: center;
                            color: white;
                        }

                        .voucher-number {
                            font-size: 14px;
                            font-weight: 600;
                            text-align: center;
                            color: white;
                        }

                        .date-section {
                            text-align: right;
                            color: white;
                        }

                        .date-label {
                            font-size: 13px;
                            font-weight: 600;
                            margin-bottom: 3px;
                            color: white;
                        }

                        .date-value {
                            font-size: 15px;
                            font-weight: bold;
                            margin-bottom: 8px;
                            color: white;
                        }

                        .company-info {
                            font-size: 10px;
                            line-height: 1.2;
                            color: white;
                        }

                        .fields-table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-bottom: 20px;
                        }

                        .fields-table td {
                            width: 50%;
                            padding: 8px 15px;
                            vertical-align: top;
                        }

                        .field-group {
                            margin-bottom: 10px;
                        }

                        .field-label {
                            color: #7d1538;
                            font-weight: bold;
                            font-size: 13px;
                            text-transform: uppercase;
                            margin-bottom: 3px;
                        }

                        .field-value {
                            border-bottom: 2px solid #333;
                            padding: 8px 0;
                            font-weight: 600;
                            font-size: 16px;
                            min-height: 25px;
                            display: flex;
                            align-items: center;
                        }

                        .transaction-badge {
                            padding: 4px 8px;
                            border-radius: 3px;
                            font-size: 12px;
                            font-weight: bold;
                        }

                        .transaction-received {
                            color: #28a745;
                            background: #d4edda;
                            border: 1px solid #c3e6cb;
                        }

                        .transaction-payment {
                            color: #dc3545;
                            background: #f8d7da;
                            border: 1px solid #f5c6cb;
                        }

                        .amount-section {
                            margin: 15px 0;
                        }

                        .amount-words-label {
                            color: #7d1538;
                            font-weight: bold;
                            font-size: 13px;
                            text-transform: uppercase;
                            margin-bottom: 5px;
                        }

                        .amount-words-value {
                            border-bottom: 2px dashed #666;
                            padding: 8px 0;
                            font-style: italic;
                            font-size: 14px;
                            margin-bottom: 15px;
                        }

                        .amount-banner {
                            background: linear-gradient(135deg, #B8860B, #DAA520);
                            color: white;
                            padding: 12px;
                            text-align: center;
                            font-weight: bold;
                            font-size: 20px;
                            border-radius: 5px;
                            text-transform: uppercase;
                        }

                        .signature-section {
                            margin-top: 20px;
                            padding-top: 15px;
                            border-top: 2px solid #ddd;
                        }

                        .signature-table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-bottom: 15px;
                        }

                        .signature-table td {
                            width: 33.33%;
                            padding: 5px;
                            vertical-align: top;
                        }

                        .signature-box {
                            background: #fffef0;
                            border: 1px solid #ddd;
                            border-radius: 4px;
                            padding: 10px;
                            text-align: center;
                            min-height: 80px;
                        }

                        .signature-label {
                            color: #7d1538;
                            font-weight: bold;
                            font-size: 11px;
                            text-transform: uppercase;
                            margin-bottom: 5px;
                        }

                        .signature-line {
                            border-bottom: 2px solid #333;
                            height: 30px;
                            margin: 8px 0;
                        }

                        .signature-name {
                            font-size: 10px;
                            color: #666;
                            margin-top: 5px;
                        }

                        .received-section {
                            border: 2px solid #7d1538;
                            padding: 12px;
                            background: #fffef0;
                            border-radius: 5px;
                            text-align: center;
                            margin-bottom: 10px;
                        }

                        .received-title {
                            color: #7d1538;
                            font-weight: bold;
                            font-size: 13px;
                            text-transform: uppercase;
                            margin-bottom: 8px;
                        }

                        .received-name {
                            font-size: 14px;
                            font-weight: 600;
                            margin-bottom: 8px;
                        }

                        .received-signature-line {
                            border-bottom: 2px solid #333;
                            height: 25px;
                            margin: 8px auto;
                            max-width: 200px;
                        }

                        .received-details {
                            display: flex;
                            justify-content: space-between;
                            font-size: 11px;
                            color: #666;
                            margin-top: 8px;
                        }

                        .footer-section {
                            margin-top: 15px;
                        }

                        .footer-info {
                            font-size: 10px;
                            color: #666;
                            text-align: right;
                            margin-bottom: 5px;
                        }

                        .footer-note {
                            background: linear-gradient(135deg, #7d1538, #5a0f28);
                            color: white;
                            text-align: center;
                            padding: 8px;
                            font-size: 11px;
                            border-radius: 4px;
                        }
                        
                        @media print {
                            .voucher-container {
                                page-break-inside: avoid;
                            }
                            
                            .header-section, .amount-banner, .footer-note {
                                -webkit-print-color-adjust: exact;
                                color-adjust: exact;
                                print-color-adjust: exact;
                            }
                        }
                    </style>

                    <div class="voucher-container">
                        <!-- Company Header -->
                        <div class="company-header">
                            <img src="https://osusproperties.com/images/osus.png" alt="OSUS Properties Logo" class="company-logo"/>
                            <div class="company-details">
                                <div class="company-name">OSUS REAL ESTATE BROKERAGE LLC</div>
                                <div>Single Business Tower 29th Floor</div>
                                <div>Business Bay Dubai</div>
                                <div>United Arab Emirates</div>
                                <div>
                                    <strong>VAT: 100236589600003</strong>
                                </div>
                            </div>
                        </div>

                        <!-- Header Section -->
                        <div class="header-section">
                            <table class="header-table">
                                <tr>
                                    <td style="width: 33.33%; vertical-align: middle;">
                                        <div class="qr-container">
                                            <div class="qr-box">
                                                <t t-if="payment.qr_code">
                                                    <img t-att-src="image_data_uri(payment.qr_code)" alt="QR Code"/>
                                                </t>
                                                <t t-else="">
                                                    <span style="font-size: 8px; color: #333; font-weight: bold;">QR</span>
                                                </t>
                                            </div>
                                            <div class="qr-text">Scan to<br/>
Verify</div>
                                        </div>
                                    </td>
                                    <td style="width: 33.33%; vertical-align: middle;">
                                        <div class="voucher-title">
                                            <t t-if="payment.payment_type == 'inbound'">RECEIPT</t>
                                            <t t-else="">VOUCHER</t>
                                        </div>
                                        <div class="voucher-number">
                                            NO: 
                                            <t t-if="payment.voucher_number">
                                                <span t-esc="payment.voucher_number"/>
                                            </t>
                                            <t t-else="">
                                                <span t-esc="payment.name"/>
                                            </t>
                                        </div>
                                    </td>
                                    <td style="width: 33.33%; vertical-align: middle;">
                                        <div class="date-section">
                                            <div class="date-label">DATE:</div>
                                            <div class="date-value">
                                                <span t-esc="payment.date.strftime('%d/%m/%Y') if payment.date else ''"/>
                                            </div>
                                            <div class="company-info">
                                                <strong>Business Bay, Dubai</strong>
                                                <br/>
                                                <strong>+971-4-366-4500</strong>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <!-- Fields Section -->
                        <table class="fields-table">
                            <tr>
                                <td>
                                    <div class="field-group">
                                        <div class="field-label">ISSUED TO:</div>
                                        <div class="field-value">
                                            <span t-esc="payment.partner_id.name"/>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="field-group">
                                        <div class="field-label">RELATED INVOICE:</div>
                                        <div class="field-value">
                                            <span t-esc="payment.ref or 'N/A'"/>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="field-group">
                                        <div class="field-label">PHONE:</div>
                                        <div class="field-value">
                                            <t t-if="payment.partner_id.phone">
                                                <span t-esc="payment.partner_id.phone"/>
                                            </t>
                                            <t t-else="">N/A</t>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="field-group">
                                        <div class="field-label">TRANSACTION TYPE:</div>
                                        <div class="field-value">
                                            <t t-if="payment.payment_type == 'inbound'">
                                                <span class="transaction-badge transaction-received">Receipt (Money Received)</span>
                                            </t>
                                            <t t-else="">
                                                <span class="transaction-badge transaction-payment">Payment (Money Paid)</span>
                                            </t>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="field-group">
                                        <div class="field-label">EMAIL:</div>
                                        <div class="field-value">
                                            <t t-if="payment.partner_id.email">
                                                <span t-esc="payment.partner_id.email"/>
                                            </t>
                                            <t t-else="">N/A</t>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="field-group">
                                        <div class="field-label">REMARKS:</div>
                                        <div class="field-value">
                                            <t t-if="payment.communication">
                                                <span t-esc="payment.communication"/>
                                            </t>
                                            <t t-else="">-</t>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="field-group">
                                        <div class="field-label">PAYMENT METHOD:</div>
                                        <div class="field-value">
                                            <span t-esc="payment.journal_id.name"/>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <!-- Empty cell -->
                                </td>
                            </tr>
                        </table>

                        <!-- Amount Section -->
                        <div class="amount-section">
                            <div class="amount-words-label">AMOUNT IN WORDS:</div>
                            <div class="amount-words-value">
                                <span t-esc="payment.currency_id.amount_to_text(payment.amount) if payment.currency_id else ''"/>
                            </div>
                            <div class="amount-banner">
                                TOTAL AMOUNT: <span t-esc="'{:,.2f}'.format(payment.amount)"/>
                            <span t-esc="payment.currency_id.name"/>
                        </div>
                    </div>

                    <!-- Signature Section -->
                    <div class="signature-section">
                        <table class="signature-table">
                            <tr>
                                <td>
                                    <div class="signature-box">
                                        <div class="signature-label">FINANCE DEPARTMENT</div>
                                        <div class="signature-line"/>
                                        <div class="signature-name">
                                            <t t-if="hasattr(payment, 'reviewer_id') and payment.reviewer_id">
                                                <span t-esc="payment.reviewer_id.name"/>
                                            </t>
                                            <t t-else="">Name: ________</t>
                                        </div>
                                        <div class="signature-name" style="margin-top: 3px;">
                                            <t t-if="hasattr(payment, 'reviewer_date') and payment.reviewer_date">
                                                <span t-esc="payment.reviewer_date.strftime('%d/%m/%Y') if payment.reviewer_date else ''"/>
                                            </t>
                                            <t t-else="">Date: ________</t>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="signature-box">
                                        <div class="signature-label">ACCOUNTS MANAGER</div>
                                        <div class="signature-line"/>
                                        <div class="signature-name">
                                            <t t-if="hasattr(payment, 'approver_id') and payment.approver_id">
                                                <span t-esc="payment.approver_id.name"/>
                                            </t>
                                            <t t-else="">Name: ________</t>
                                        </div>
                                        <div class="signature-name" style="margin-top: 3px;">
                                            <t t-if="hasattr(payment, 'approver_date') and payment.approver_date">
                                                <span t-esc="payment.approver_date.strftime('%d/%m/%Y') if payment.approver_date else ''"/>
                                            </t>
                                            <t t-else="">Date: ________</t>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="signature-box">
                                        <div class="signature-label">AUTHORIZED OFFICER</div>
                                        <div class="signature-line"/>
                                        <div class="signature-name">
                                            <t t-if="hasattr(payment, 'authorizer_id') and payment.authorizer_id">
                                                <span t-esc="payment.authorizer_id.name"/>
                                            </t>
                                            <t t-else="">Name: ________</t>
                                        </div>
                                        <div class="signature-name" style="margin-top: 3px;">
                                            <t t-if="hasattr(payment, 'authorizer_date') and payment.authorizer_date">
                                                <span t-esc="payment.authorizer_date.strftime('%d/%m/%Y') if payment.authorizer_date else ''"/>
                                            </t>
                                            <t t-else="">Date: ________</t>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <!-- Received By Section -->
                        <div class="received-section">
                            <div class="received-title">RECEIVED BY</div>
                            <div class="received-name">
                                    Name and Signature:<br/>
                                    Print: <span t-esc="payment.partner_id.name"/>
                        </div>
                        <div class="received-signature-line"/>
                        <div class="received-details">
                            <span>Mobile: _______</span>
                            <span>Date: <span t-esc="payment.date.strftime('%d/%m/%Y') if payment.date else ''"/>
                            </span>
                            <span>ID Copy: [ ] Yes [ ] No</span>
                        </div>
                    </div>
                </div>

                <!-- Footer Section -->
                <div class="footer-section">
                    <div class="footer-info">
                                Created: <span t-esc="payment.create_uid.name"/>
 | 
                    <span t-esc="payment.create_date.strftime('%d/%m/%Y %H:%M') if payment.create_date else ''"/>
 | 
                                Modified: <span t-esc="payment.write_uid.name"/>
                </div>
                <div class="footer-note">
                    <strong>Thank you for your business!</strong> | Computer-generated document | 
                                REF: <t t-if="payment.voucher_number">
                    <span t-esc="payment.voucher_number"/>
                </t>
                <t t-else="">
                    <span t-esc="payment.name"/>
                </t>
            </div>
        </div>

        <!-- Company Footer -->
        <div class="company-footer">
            <div class="footer-contact">
                <strong>Phone:</strong> +971 4 336 4500<br/>
            <strong>Email:</strong> info@osusproperties.com
        </div>
        <div class="footer-website">
                                www.osusproperties.com
        </div>
        <div class="footer-disclaimer">
                                This is a computer generated document.<br/>
                                No signature or stamp required.
        </div>
    </div>
</div>
</div>

<!-- PAGE 2: Optional Detailed Documentation (Conditional) -->
<t t-if="hasattr(payment, 'include_detailed_documentation') and payment.include_detailed_documentation">
<div class="page" style="font-family: Arial, sans-serif; padding: 20px; page-break-before: always;">
    <style>
                            .documentation-header {
                                background: linear-gradient(135deg, #7d1538, #5a0f28);
                                color: white;
                                padding: 15px;
                                text-align: center;
                                border-radius: 5px;
                                margin-bottom: 20px;
                            }
                            
                            .doc-title {
                                font-size: 22px;
                                font-weight: bold;
                                margin-bottom: 5px;
                            }
                            
                            .doc-subtitle {
                                font-size: 14px;
                                opacity: 0.9;
                            }
                            
                            .doc-section {
                                margin-bottom: 25px;
                            }
                            
                            .section-title {
                                background: #7d1538;
                                color: white;
                                padding: 8px 15px;
                                font-weight: bold;
                                font-size: 14px;
                                border-radius: 3px;
                                margin-bottom: 10px;
                            }
                            
                            .doc-table {
                                width: 100%;
                                border-collapse: collapse;
                                margin-bottom: 15px;
                            }
                            
                            .doc-table th {
                                background: #f5f5f5;
                                border: 1px solid #ddd;
                                padding: 8px;
                                text-align: left;
                                font-size: 12px;
                                font-weight: bold;
                            }
                            
                            .doc-table td {
                                border: 1px solid #ddd;
                                padding: 8px;
                                font-size: 12px;
                            }
                            
                            .info-grid {
                                display: grid;
                                grid-template-columns: 1fr 1fr;
                                gap: 15px;
                                margin-bottom: 15px;
                            }
                            
                            .info-box {
                                border: 1px solid #ddd;
                                padding: 12px;
                                border-radius: 4px;
                                background: #fafafa;
                            }
                            
                            .info-label {
                                font-weight: bold;
                                color: #7d1538;
                                font-size: 11px;
                                margin-bottom: 5px;
                                text-transform: uppercase;
                            }
                            
                            .info-value {
                                font-size: 13px;
                                color: #333;
                            }
                            
                            .status-badge {
                                display: inline-block;
                                padding: 5px 10px;
                                border-radius: 3px;
                                font-size: 11px;
                                font-weight: bold;
                            }
                            
                            .status-posted {
                                background: #d4edda;
                                color: #155724;
                                border: 1px solid #c3e6cb;
                            }
                            
                            .status-draft {
                                background: #f8d7da;
                                color: #721c24;
                                border: 1px solid #f5c6cb;
                            }
    </style>

    <div class="documentation-header">
        <div class="doc-title">PAYMENT DOCUMENTATION</div>
        <div class="doc-subtitle">
                                Reference: <span t-esc="payment.name"/>
 | 
                                Date: <span t-esc="payment.date.strftime('%d/%m/%Y') if payment.date else ''"/>
    </div>
</div>

<!-- Payment Details Section -->
<div class="doc-section">
    <div class="section-title">PAYMENT INFORMATION</div>
    <div class="info-grid">
        <div class="info-box">
            <div class="info-label">Payment Number</div>
            <div class="info-value">
                <span t-esc="payment.name"/>
            </div>
        </div>
        <div class="info-box">
            <div class="info-label">Payment Date</div>
            <div class="info-value">
                <span t-esc="payment.date.strftime('%d %B %Y') if payment.date else ''"/>
            </div>
        </div>
        <div class="info-box">
            <div class="info-label">Payment Type</div>
            <div class="info-value">
                <t t-if="payment.payment_type == 'inbound'">
                    <span class="status-badge status-posted">Receipt (Inbound)</span>
                </t>
                <t t-else="">
                    <span class="status-badge status-draft">Payment (Outbound)</span>
                </t>
            </div>
        </div>
        <div class="info-box">
            <div class="info-label">Payment Status</div>
            <div class="info-value">
                <span class="status-badge" t-att-class="'status-posted' if payment.state == 'posted' else 'status-draft'">
                    <span t-esc="payment.state.upper()"/>
                </span>
            </div>
        </div>
        <div class="info-box">
            <div class="info-label">Amount</div>
            <div class="info-value" style="font-size: 16px; font-weight: bold; color: #7d1538;">
                <span t-esc="'{:,.2f}'.format(payment.amount)"/>
                <span t-esc="payment.currency_id.name"/>
            </div>
        </div>
        <div class="info-box">
            <div class="info-label">Payment Method</div>
            <div class="info-value">
                <span t-esc="payment.journal_id.name"/>
            </div>
        </div>
    </div>
</div>

<!-- Partner Information -->
<div class="doc-section">
    <div class="section-title">PARTNER INFORMATION</div>
    <div class="info-grid">
        <div class="info-box">
            <div class="info-label">Partner Name</div>
            <div class="info-value">
                <span t-esc="payment.partner_id.name"/>
            </div>
        </div>
        <div class="info-box">
            <div class="info-label">Partner Type</div>
            <div class="info-value">
                <span t-esc="payment.partner_type.capitalize() if payment.partner_type else 'N/A'"/>
            </div>
        </div>
        <div class="info-box">
            <div class="info-label">Phone</div>
            <div class="info-value">
                <span t-esc="payment.partner_id.phone or 'N/A'"/>
            </div>
        </div>
        <div class="info-box">
            <div class="info-label">Email</div>
            <div class="info-value">
                <span t-esc="payment.partner_id.email or 'N/A'"/>
            </div>
        </div>
        <div class="info-box" style="grid-column: span 2;">
            <div class="info-label">Address</div>
            <div class="info-value">
                <t t-if="payment.partner_id.street">
                    <span t-esc="payment.partner_id.street"/>
                    <br/>
                </t>
                <t t-if="payment.partner_id.street2">
                    <span t-esc="payment.partner_id.street2"/>
                    <br/>
                </t>
                <t t-if="payment.partner_id.city">
                    <span t-esc="payment.partner_id.city"/>
, 
                </t>
                <t t-if="payment.partner_id.state_id">
                    <span t-esc="payment.partner_id.state_id.name"/>
, 
                </t>
                <t t-if="payment.partner_id.country_id">
                    <span t-esc="payment.partner_id.country_id.name"/>
                </t>
            </div>
        </div>
    </div>
</div>

<!-- Reconciliation Information -->
<t t-if="payment.reconciled_invoice_ids">
    <div class="doc-section">
        <div class="section-title">RECONCILED INVOICES</div>
        <table class="doc-table">
            <thead>
                <tr>
                    <th>Invoice Number</th>
                    <th>Invoice Date</th>
                    <th>Due Date</th>
                    <th>Amount</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <t t-foreach="payment.reconciled_invoice_ids" t-as="invoice">
                    <tr>
                        <td>
                            <span t-esc="invoice.name"/>
                        </td>
                        <td>
                            <span t-esc="invoice.invoice_date.strftime('%d/%m/%Y') if invoice.invoice_date else 'N/A'"/>
                        </td>
                        <td>
                            <span t-esc="invoice.invoice_date_due.strftime('%d/%m/%Y') if invoice.invoice_date_due else 'N/A'"/>
                        </td>
                        <td>
                            <span t-esc="'{:,.2f}'.format(invoice.amount_total)"/>
                            <span t-esc="invoice.currency_id.name"/>
                        </td>
                        <td>
                            <span t-esc="invoice.state.upper()"/>
                        </td>
                    </tr>
                </t>
            </tbody>
        </table>
    </div>
</t>

<!-- Audit Trail -->
<div class="doc-section">
    <div class="section-title">AUDIT TRAIL</div>
    <table class="doc-table">
        <thead>
            <tr>
                <th>Event</th>
                <th>User</th>
                <th>Date & Time</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <strong>Created</strong>
                </td>
                <td>
                    <span t-esc="payment.create_uid.name"/>
                </td>
                <td>
                    <span t-esc="payment.create_date.strftime('%d/%m/%Y %H:%M:%S') if payment.create_date else ''"/>
                </td>
            </tr>
            <tr>
                <td>
                    <strong>Last Modified</strong>
                </td>
                <td>
                    <span t-esc="payment.write_uid.name"/>
                </td>
                <td>
                    <span t-esc="payment.write_date.strftime('%d/%m/%Y %H:%M:%S') if payment.write_date else ''"/>
                </td>
            </tr>
            <t t-if="hasattr(payment, 'reviewer_id') and payment.reviewer_id">
                <tr>
                    <td>
                        <strong>Reviewed</strong>
                    </td>
                    <td>
                        <span t-esc="payment.reviewer_id.name"/>
                    </td>
                    <td>
                        <span t-esc="payment.reviewer_date.strftime('%d/%m/%Y %H:%M:%S') if hasattr(payment, 'reviewer_date') and payment.reviewer_date else ''"/>
                    </td>
                </tr>
            </t>
            <t t-if="hasattr(payment, 'approver_id') and payment.approver_id">
                <tr>
                    <td>
                        <strong>Approved</strong>
                    </td>
                    <td>
                        <span t-esc="payment.approver_id.name"/>
                    </td>
                    <td>
                        <span t-esc="payment.approver_date.strftime('%d/%m/%Y %H:%M:%S') if hasattr(payment, 'approver_date') and payment.approver_date else ''"/>
                    </td>
                </tr>
            </t>
            <t t-if="hasattr(payment, 'authorizer_id') and payment.authorizer_id">
                <tr>
                    <td>
                        <strong>Authorized</strong>
                    </td>
                    <td>
                        <span t-esc="payment.authorizer_id.name"/>
                    </td>
                    <td>
                        <span t-esc="payment.authorizer_date.strftime('%d/%m/%Y %H:%M:%S') if hasattr(payment, 'authorizer_date') and payment.authorizer_date else ''"/>
                    </td>
                </tr>
            </t>
        </tbody>
    </table>
</div>

<!-- Notes Section -->
<div class="doc-section">
    <div class="section-title">NOTES & REMARKS</div>
    <div style="border: 1px solid #ddd; padding: 15px; min-height: 100px; background: #fafafa; border-radius: 4px;">
        <t t-if="payment.communication">
            <span t-esc="payment.communication"/>
        </t>
        <t t-else="">
            <em style="color: #999;">No notes or remarks added.</em>
        </t>
    </div>
</div>

<!-- Footer -->
<div style="margin-top: 30px; padding-top: 15px; border-top: 2px solid #7d1538; text-align: center; font-size: 10px; color: #666;">
    <p>
        <strong>OSUS REAL ESTATE BROKERAGE LLC</strong>
    </p>
    <p>Single Business Tower 29th Floor, Business Bay, Dubai, UAE | VAT: 100236589600003</p>
    <p>Phone: +971 4 336 4500 | Email: info@osusproperties.com | www.osusproperties.com</p>
    <p style="margin-top: 10px; font-style: italic;">This document is confidential and intended for internal use only.</p>
</div>
</div>
</t>
</t>
</t>
</template>
<template id="report_payment_voucher_document">
<t t-call="web.html_container">
<t t-foreach="docs" t-as="o">
<t t-call="web.external_layout">
<div class="page">
<!-- Custom CSS for the voucher -->
<style>
                            .voucher-header {
                                background: linear-gradient(135deg, #6B2B47, #8B1538);
                                color: white;
                                padding: 15px;
                                margin: -15px -15px 20px -15px;
                                box-shadow: 0 2px 4px rgba(0,0,0,0.3);
                            }
                            .voucher-title {
                                text-align: center;
                                font-size: 28px;
                                font-weight: bold;
                                letter-spacing: 2px;
                                margin-bottom: 0;
                                text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
                            }
                            .voucher-subtitle {
                                text-align: center;
                                font-size: 16px;
                                margin: 5px 0 0 0;
                            }
                            .company-info {
                                font-size: 13px;
                                line-height: 1.3;
                                font-weight: 500;
                                text-shadow: 1px 1px 1px rgba(0,0,0,0.2);
                            }
                            .field-label {
                                color: #6b0632ff;
                                font-weight: bold;
                                font-size: 14px;
                                margin-bottom: 5px;
                            }
                            .field-value {
                                border-bottom: 2px solid #333;
                                padding-bottom: 3px;
                                margin-bottom: 15px;
                                min-height: 20px;
                                color: #000;
                                font-weight: 500;
                                font-size: 13px;
                            }
                            .amount-section {
                                background: linear-gradient(135deg, #b19024ff, #8B6F00);
                                color: white;
                                padding: 15px;
                                text-align: center;
                                margin: 20px 0;
                                font-size: 18px;
                                font-weight: bold;
                                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.81);
                                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.76);
                            }
                            .signature-section {
                                margin-top: 40px;
                            }
                            .signature-box {
                                text-align: center;
                                padding: 10px;
                                margin-bottom: 10px;
                            }
                            .signature-line {
                                border-bottom: 2px solid #000;
                                margin-bottom: 5px;
                                height: 30px;
                            }
                            .footer-note {
                                background: linear-gradient(135deg, #6B2B47, #8B1538);
                                color: white;
                                text-align: center;
                                padding: 12px;
                                font-size: 13px;
                                font-weight: 500;
                                margin: 20px -15px -15px -15px;
                                box-shadow: 0 -2px 4px rgba(0,0,0,0.3);
                                text-shadow: 1px 1px 1px rgba(0,0,0,0.2);
                            }
                            .creator-info {
                                font-size: 12px;
                                color: #333;
                                margin-top: 5px;
                                font-style: italic;
                                font-weight: 500;
                            }
                            .authorized-name {
                                font-size: 14px;
                                font-weight: bold;
                                color: #000;
                            }
                            .signature-initials {
                                font-size: 14px;
                                font-weight: bold;
                                color: #6B2B47;
                                font-style: italic;
                                margin-top: 10px;
                                margin-bottom: 5px;
                                letter-spacing: 1px;
                                max-height: 60px;
                                overflow: hidden;
                            }
                            .user-signature {
                                font-family: cursive, 'Brush Script MT', fantasy;
                                font-size: 16px;
                                color: #6B2B47;
                                margin-top: 5px;
                                margin-bottom: 5px;
                                max-height: 50px;
                                overflow: hidden;
                            }
</style>

<!-- Header Section -->
<div class="voucher-header">
    <div class="row">
        <div class="col-6">
            <div class="company-info">
                <strong>OSUS REAL ESTATE BROKERAGE LLC</strong>
                <br/>
                                        Single Tower<br/>
                                        Business Bay<br/>
                                        29th Floor<br/>
                                        Dubai<br/>
                                        United Arab Emirates
</div>
</div>
<div class="col-6">
<h2 class="voucher-title">
    <t t-if="o.payment_type == 'inbound'">Receipt</t>
    <t t-else="">Voucher</t>
</h2>
<div class="voucher-subtitle">
    <strong>Reference: <span t-field="o.name"/>
    </strong>
</div>
</div>
</div>
</div>

<!-- Main Content -->
<div class="row">
<!-- Left Column -->
<div class="col-6">
<!-- Issue To Section -->
<div class="field-label">Issue to:</div>
<div class="field-value">
<span t-field="o.partner_id.name"/>
</div>

<!-- Phone Section -->
<div class="field-label">Phone</div>
<div class="field-value">
<span t-field="o.partner_id.mobile"/>
<t t-if="not o.partner_id.mobile">-</t>
</div>

<!-- Payment Method Section -->
<div class="field-label">Payment Method</div>
<div class="field-value">
<span t-field="o.journal_id.name"/>
</div>

<!-- Related Invoice/Bill Section -->
<t t-set="doc_info" t-value="o.get_related_document_info()"/>
<div class="field-label">
<span t-esc="doc_info['label']"/>
</div>
<div class="field-value">
<span t-esc="doc_info['references']"/>
</div>
</div>

<!-- Right Column -->
<div class="col-6">
<!-- Date Section -->
<div class="field-label">Date:</div>
<div class="field-value">
<span t-field="o.date" t-options='{"widget": "date"}'/>
</div>

<!-- Remarks Section -->
<div class="field-label">Remarks</div>
<div class="field-value" style="min-height: 60px;">
<span t-field="o.ref"/>
<t t-if="not o.ref">-</t>
</div>
</div>
</div>

<!-- Amount in Words Section -->
<div class="field-label">Amount in words</div>
<div class="field-value" style="min-height: 30px;">
<span t-esc="o._get_amount_in_words()"/>
</div>

<!-- Detailed Document Information (when multiple documents) -->
<t t-set="doc_info" t-value="o.get_related_document_info()"/>
<t t-if="doc_info['count'] > 1">
<div style="margin: 20px 0; padding: 15px; background-color: #f8f9fa; border-left: 4px solid #6b0632ff;">
<div class="field-label" style="margin-bottom: 10px;">
                                    Document Details (<t t-esc="doc_info['count']"/>
 documents)
</div>
<table style="width: 100%; font-size: 12px; border-collapse: collapse;">
<thead>
    <tr style="background-color: #6b0632ff; color: white;">
        <th style="padding: 8px; border: 1px solid #ccc; text-align: left;">Document #</th>
        <th style="padding: 8px; border: 1px solid #ccc; text-align: left;">Type</th>
        <th style="padding: 8px; border: 1px solid #ccc; text-align: center;">Date</th>
        <th style="padding: 8px; border: 1px solid #ccc; text-align: right;">Amount</th>
    </tr>
</thead>
<tbody>
    <t t-foreach="doc_info['documents']" t-as="doc">
        <tr>
            <td style="padding: 6px; border: 1px solid #ddd;">
                <span t-esc="doc.name"/>
            </td>
            <td style="padding: 6px; border: 1px solid #ddd;">
                <t t-if="doc.move_type == 'out_invoice'">Customer Invoice</t>
                <t t-elif="doc.move_type == 'in_invoice'">Vendor Bill</t>
                <t t-elif="doc.move_type == 'out_refund'">Customer Credit Note</t>
                <t t-elif="doc.move_type == 'in_refund'">Vendor Credit Note</t>
                <t t-else="">
                    <t t-esc="doc.move_type"/>
                </t>
            </td>
            <td style="padding: 6px; border: 1px solid #ddd; text-align: center;">
                <span t-field="doc.invoice_date" t-options='{"widget": "date"}'/>
            </td>
            <td style="padding: 6px; border: 1px solid #ddd; text-align: right;">
                <span t-field="doc.amount_total" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
            </td>
        </tr>
    </t>
</tbody>
</table>
</div>
</t>

<!-- Payment Summary Section (when there are related documents) -->
<t t-if="doc_info['count'] > 0">
<t t-set="payment_summary" t-value="o.get_payment_summary()"/>
<div style="margin: 15px 0; padding: 10px; background-color: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px;">
<div class="field-label" style="margin-bottom: 8px; color: #b8860b;">
                                    Payment Summary
</div>
<div style="font-size: 13px;">
<div style="margin-bottom: 5px;">
    <strong>Description:</strong>
    <span t-esc="o.get_voucher_description()"/>
</div>
<t t-if="payment_summary['total_invoice_amount'] > 0">
    <div style="margin-bottom: 5px;">
        <strong>Total Document Amount:</strong>
        <span t-esc="'{:,.2f}'.format(payment_summary['total_invoice_amount'])"/>
        <span t-esc="payment_summary['currency'].name"/>
    </div>
    <div style="margin-bottom: 5px;">
        <strong>Payment Status:</strong>
        <t t-if="payment_summary['is_full_payment']">
            <span style="color: #28a745; font-weight: bold;"> Full Payment</span>
        </t>
        <t t-else="">
            <span style="color: #dc3545; font-weight: bold;"> Partial Payment</span>
            <span style="margin-left: 10px;">
                                                    (Remaining: <span t-esc="'{:,.2f}'.format(payment_summary['remaining_balance'])"/>
            <span t-esc="payment_summary['currency'].name"/>
)
        </span>
    </t>
</div>
</t>
</div>
</div>
</t>

<!-- Total Price Section -->
<div class="amount-section">
<div class="row">
<div class="col-6">
<strong>Total Price:</strong>
</div>
<div class="col-6">
<span t-field="o.amount" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
</div>
</div>
</div>

<!-- Signature Section -->
<div class="signature-section">
<div class="row">
<div class="col-6">
<div class="signature-box">
<!-- User's actual signature or initials -->
<t t-if="o.create_uid.signature">
    <div class="user-signature">
        <span t-field="o.create_uid.signature" t-options='{"widget": "html"}'/>
    </div>
</t>
<t t-else="">
    <div class="signature-initials">
        <t t-set="creator_name" t-value="o.create_uid.name or ''"/>
        <t t-set="name_parts" t-value="creator_name.split()"/>
        <t t-if="len(name_parts) >= 2">
            <span t-esc="name_parts[0][:1] + name_parts[-1][:1]"/>
        </t>
        <t t-elif="len(name_parts) == 1 and name_parts[0]">
            <span t-esc="name_parts[0][:2]"/>
        </t>
        <t t-else="">--</t>
    </div>
</t>
<div class="signature-line"></div>
<strong>Authorized:</strong>
<br/>
<div class="authorized-name" style="margin-top: 8px;">
    <span t-field="o.create_uid.name"/>
</div>
<div class="creator-info">
                                            Created: <span t-field="o.create_date" t-options='{"widget": "datetime", "format": "dd/MM/yyyy HH:mm"}'/>
</div>
<div class="creator-info">
                                            Printed: <span t-esc="datetime.datetime.now().strftime('%d/%m/%Y %H:%M')"/>
</div>
</div>
</div>
<div class="col-6">
<div class="signature-box">
<div class="signature-line"></div>
<strong>
    <t t-if="o.payment_type == 'inbound'">Received by</t>
    <t t-else="">Paid to</t>
</strong>
<br/>
<div style="margin-top: 10px;">
    <span style="display: inline-block; width: 50px;">name</span>
    <span style="display: inline-block; width: 100px; border-bottom: 1px solid #000; margin: 0 20px;"></span>
    <span>Mob #:</span>
    <span style="display: inline-block; width: 100px; border-bottom: 1px solid #000; margin-left: 10px;"></span>
</div>
</div>
</div>
</div>
</div>

<!-- QR Code Section - Only for Customer Receipts -->
<t t-if="o.payment_type == 'inbound'">
<div class="row mt-4" t-if="o.display_qr_code and o.amount > 0 and o.qr_code_urls">
<div class="col-12 text-center">
<div class="field-label">Payment QR Code</div>
<div style="margin: 10px 0;">
<img class="border border-dark rounded" t-att-src="o.qr_code_urls" style="width:120px; height:120px;"/>
</div>
<p style="font-size: 12px; color: #666; margin: 5px 0;">Scan with your banking app for payment details</p>
</div>
</div>
</t>

<!-- Footer -->
<div class="footer-note">
                            Thank you for your business  Confirm payment at 0563905772
</div>
</div>
</t>
</t>
</t>
</template>
</odoo>
