<?xml version="1.0" encoding="utf-8"?>
<templates xml:space="preserve">

    <t t-name="crm_executive_dashboard.Dashboard" owl="1">
        <div class="o_crm_executive_dashboard">
            <!-- Loading Overlay -->
            <div t-if="state.isLoading" class="o_loading_overlay">
                <div class="text-center">
                    <i class="fa fa-spinner fa-spin fa-3x text-primary"/>
                    <div class="mt-3">
                        <h4>Loading Dashboard...</h4>
                        <p class="text-muted">Please wait while we fetch your data</p>
                    </div>
                </div>
            </div>

            <!-- Dashboard Header -->
            <div class="o_dashboard_header">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="o_dashboard_title">
                        <h2 class="mb-0">
                            <i class="fa fa-dashboard text-primary me-2"/>
                            CRM Executive Dashboard
                        </h2>
                        <p class="text-muted mb-0">Real-time sales analytics and performance insights</p>
                    </div>
                    
                    <div class="o_dashboard_controls d-flex gap-2">
                        <!-- Auto Refresh Toggle -->
                        <button class="btn btn-outline-secondary" 
                                t-on-click="toggleAutoRefresh"
                                t-att-class="state.autoRefresh ? 'active' : ''">
                            <i class="fa fa-refresh"/>
                            <span class="d-none d-md-inline ms-1">Auto Refresh</span>
                        </button>
                        
                        <!-- Export Button -->
                        <button class="btn btn-outline-primary" t-on-click="exportData">
                            <i class="fa fa-download"/>
                            <span class="d-none d-md-inline ms-1">Export</span>
                        </button>
                        
                        <!-- Manual Refresh -->
                        <button class="btn btn-primary" t-on-click="onRefreshClick">
                            <i class="fa fa-refresh"/>
                            <span class="d-none d-md-inline ms-1">Refresh</span>
                        </button>
                    </div>
                </div>

                <!-- Filters Row -->
                <div class="o_dashboard_filters mt-3">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label class="form-label">Date Range:</label>
                            <div class="input-group">
                                <input type="date" 
                                       class="form-control" 
                                       t-model="state.dateRange.start"
                                       t-on-change="onDateRangeChange"/>
                                <span class="input-group-text">to</span>
                                <input type="date" 
                                       class="form-control" 
                                       t-model="state.dateRange.end"
                                       t-on-change="onDateRangeChange"/>
                            </div>
                        </div>
                        
                        <div class="col-md-4">
                            <label class="form-label">Sales Teams:</label>
                            <select class="form-select" 
                                    multiple="true" 
                                    t-model="state.selectedTeams"
                                    t-on-change="onTeamSelectionChange">
                                <option value="">All Teams</option>
                                <t t-foreach="availableTeams || []" t-as="team" t-key="team.id">
                                    <option t-att-value="team.id" t-esc="team.name"/>
                                </t>
                            </select>
                        </div>
                        
                        <div class="col-md-4 d-flex align-items-end">
                            <div class="text-muted small">
                                <i class="fa fa-info-circle me-1"/>
                                Last updated: <span t-esc="new Date().toLocaleString()"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- KPI Cards Section -->
            <div class="o_kpi_section mt-4">
                <div class="row g-3">
                    <div class="col-lg-3 col-md-6">
                        <div class="o_kpi_card o_kpi_leads">
                            <div class="o_kpi_icon">
                                <i class="fa fa-users"/>
                            </div>
                            <div class="o_kpi_content">
                                <h3 t-esc="formatNumber(state.dashboardData.kpis.total_leads || 0)"/>
                                <p>Total Leads</p>
                                <div class="o_kpi_trend">
                                    <i class="fa fa-arrow-up text-success"/>
                                    <span class="text-success">+12%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6">
                        <div class="o_kpi_card o_kpi_opportunities">
                            <div class="o_kpi_icon">
                                <i class="fa fa-star"/>
                            </div>
                            <div class="o_kpi_content">
                                <h3 t-esc="formatNumber(state.dashboardData.kpis.total_opportunities || 0)"/>
                                <p>Opportunities</p>
                                <div class="o_kpi_trend">
                                    <i class="fa fa-arrow-up text-success"/>
                                    <span class="text-success">+8%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6">
                        <div class="o_kpi_card o_kpi_revenue">
                            <div class="o_kpi_icon">
                                <i class="fa fa-money"/>
                            </div>
                            <div class="o_kpi_content">
                                <h3 t-esc="formatCurrency(state.dashboardData.kpis.won_revenue || 0)"/>
                                <p>Won Revenue</p>
                                <div class="o_kpi_trend">
                                    <i class="fa fa-arrow-up text-success"/>
                                    <span class="text-success">+15%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6">
                        <div class="o_kpi_card o_kpi_conversion">
                            <div class="o_kpi_icon">
                                <i class="fa fa-line-chart"/>
                            </div>
                            <div class="o_kpi_content">
                                <h3 t-esc="formatPercentage(state.dashboardData.kpis.conversion_rate || 0)"/>
                                <p>Conversion Rate</p>
                                <div class="o_kpi_trend">
                                    <i class="fa fa-arrow-down text-danger"/>
                                    <span class="text-danger">-2%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional KPIs Row -->
                <div class="row g-3 mt-2">
                    <div class="col-lg-3 col-md-6">
                        <div class="o_kpi_card o_kpi_expected">
                            <div class="o_kpi_content_only">
                                <h4 t-esc="formatCurrency(state.dashboardData.kpis.expected_revenue || 0)"/>
                                <p>Expected Revenue</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6">
                        <div class="o_kpi_card o_kpi_deal_size">
                            <div class="o_kpi_content_only">
                                <h4 t-esc="formatCurrency(state.dashboardData.kpis.avg_deal_size || 0)"/>
                                <p>Avg Deal Size</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6">
                        <div class="o_kpi_card o_kpi_won">
                            <div class="o_kpi_content_only">
                                <h4 t-esc="formatNumber(state.dashboardData.kpis.won_opportunities || 0)"/>
                                <p>Won Opportunities</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6">
                        <div class="o_kpi_card o_kpi_lost">
                            <div class="o_kpi_content_only">
                                <h4 t-esc="formatNumber(state.dashboardData.kpis.lost_opportunities || 0)"/>
                                <p>Lost Opportunities</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="o_charts_section mt-4">
                <div class="row g-4">
                    <!-- Sales Pipeline Chart -->
                    <div class="col-lg-6">
                        <div class="o_chart_container">
                            <div class="o_chart_header">
                                <h4>
                                    <i class="fa fa-pie-chart text-primary me-2"/>
                                    Sales Pipeline
                                </h4>
                                <p class="text-muted">Distribution by stages</p>
                            </div>
                            <div class="o_chart_body">
                                <canvas id="pipelineChart" height="300"/>
                            </div>
                        </div>
                    </div>

                    <!-- Trends Chart -->
                    <div class="col-lg-6">
                        <div class="o_chart_container">
                            <div class="o_chart_header">
                                <h4>
                                    <i class="fa fa-line-chart text-success me-2"/>
                                    12-Month Trends
                                </h4>
                                <p class="text-muted">Leads, opportunities and revenue over time</p>
                            </div>
                            <div class="o_chart_body">
                                <canvas id="trendsChart" height="300"/>
                            </div>
                        </div>
                    </div>

                    <!-- Team Performance Chart -->
                    <div class="col-lg-6">
                        <div class="o_chart_container">
                            <div class="o_chart_header">
                                <h4>
                                    <i class="fa fa-bar-chart text-warning me-2"/>
                                    Team Performance
                                </h4>
                                <p class="text-muted">Revenue and conversion rates by team</p>
                            </div>
                            <div class="o_chart_body">
                                <canvas id="teamPerformanceChart" height="300"/>
                            </div>
                        </div>
                    </div>

                    <!-- Lead Sources Chart -->
                    <div class="col-lg-6">
                        <div class="o_chart_container">
                            <div class="o_chart_header">
                                <h4>
                                    <i class="fa fa-bullseye text-info me-2"/>
                                    Lead Sources
                                </h4>
                                <p class="text-muted">Customer acquisition channels</p>
                            </div>
                            <div class="o_chart_body">
                                <canvas id="sourcesChart" height="300"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Items Section -->
            <div class="o_action_items_section mt-4">
                <div class="row g-4">
                    <!-- Overdue Opportunities -->
                    <div class="col-lg-8">
                        <div class="o_action_card">
                            <div class="o_card_header">
                                <h4>
                                    <i class="fa fa-exclamation-triangle text-danger me-2"/>
                                    Overdue Opportunities
                                    <button class="btn btn-sm btn-outline-primary float-end" 
                                            t-on-click="openOverdueOpportunities">
                                        View All
                                    </button>
                                </h4>
                            </div>
                            <div class="o_card_body">
                                <t t-if="state.overdueOpportunities.length === 0">
                                    <div class="text-center text-muted py-4">
                                        <i class="fa fa-check-circle fa-2x text-success"/>
                                        <p class="mt-2">No overdue opportunities! 🎉</p>
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Opportunity</th>
                                                    <th>Customer</th>
                                                    <th>Revenue</th>
                                                    <th>Probability</th>
                                                    <th>Due Date</th>
                                                    <th>Salesperson</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <t t-foreach="state.overdueOpportunities.slice(0, 5)" t-as="opp" t-key="opp.id">
                                                    <tr class="cursor-pointer" t-on-click="() => this.openOpportunity(opp.id)">
                                                        <td t-esc="opp.name"/>
                                                        <td t-esc="opp.partner_name"/>
                                                        <td t-esc="formatCurrency(opp.planned_revenue)"/>
                                                        <td>
                                                            <span class="badge bg-warning" t-esc="opp.probability + '%'"/>
                                                        </td>
                                                        <td>
                                                            <span class="text-danger" t-esc="opp.date_deadline"/>
                                                        </td>
                                                        <td t-esc="opp.user_id"/>
                                                    </tr>
                                                </t>
                                            </tbody>
                                        </table>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>

                    <!-- Top Performers -->
                    <div class="col-lg-4">
                        <div class="o_action_card">
                            <div class="o_card_header">
                                <h4>
                                    <i class="fa fa-trophy text-warning me-2"/>
                                    Top Performers
                                    <button class="btn btn-sm btn-outline-primary float-end" 
                                            t-on-click="openTopPerformersView">
                                        View All
                                    </button>
                                </h4>
                            </div>
                            <div class="o_card_body">
                                <t t-if="state.topPerformers.length === 0">
                                    <div class="text-center text-muted py-3">
                                        <i class="fa fa-users fa-2x"/>
                                        <p class="mt-2">No performance data available</p>
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="o_performers_list">
                                        <t t-foreach="state.topPerformers" t-as="performer" t-key="performer.name">
                                            <div class="o_performer_item d-flex align-items-center mb-3">
                                                <div class="o_performer_avatar me-3">
                                                    <img t-att-src="performer.avatar" 
                                                         class="rounded-circle"
                                                         width="40" 
                                                         height="40"
                                                         t-att-alt="performer.name"/>
                                                </div>
                                                <div class="o_performer_info flex-grow-1">
                                                    <h6 class="mb-0" t-esc="performer.name"/>
                                                    <small class="text-muted">
                                                        <t t-esc="formatCurrency(performer.revenue)"/> 
                                                        (<t t-esc="performer.count"/> deals)
                                                    </small>
                                                </div>
                                                <div class="o_performer_rank">
                                                    <span class="badge bg-primary" t-esc="performer_index + 1"/>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Performance Metrics Section -->
            <div class="o_agent_metrics_section mt-4">
                <div class="row g-4">
                    <!-- Top Agents with Leads in Progress -->
                    <div class="col-lg-6">
                        <div class="o_dashboard_card">
                            <div class="o_card_header d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">
                                    <i class="fa fa-users text-primary me-2"/>
                                    Top Agents - Leads in Progress
                                </h5>
                                <small class="text-muted">Active leads by agent</small>
                            </div>
                            <div class="o_card_body">
                                <t t-if="state.dashboardData.agent_metrics and state.dashboardData.agent_metrics.top_agents_with_progress">
                                    <div class="o_agents_list">
                                        <t t-foreach="state.dashboardData.agent_metrics.top_agents_with_progress.slice(0, 5)" t-as="agent" t-key="agent.agent_id">
                                            <div class="o_agent_item d-flex align-items-center mb-3 p-2 border rounded">
                                                <div class="o_agent_avatar me-3">
                                                    <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center" 
                                                         style="width: 40px; height: 40px; font-size: 14px;">
                                                        <t t-esc="agent.agent_name.charAt(0).toUpperCase()"/>
                                                    </div>
                                                </div>
                                                <div class="o_agent_info flex-grow-1">
                                                    <h6 class="mb-1" t-esc="agent.agent_name"/>
                                                    <div class="d-flex justify-content-between">
                                                        <small class="text-muted">
                                                            <i class="fa fa-briefcase me-1"/>
                                                            <t t-esc="agent.leads_count"/> leads
                                                        </small>
                                                        <small class="text-success">
                                                            <i class="fa fa-money me-1"/>
                                                            <t t-esc="formatCurrency(agent.total_revenue)"/>
                                                        </small>
                                                    </div>
                                                </div>
                                                <div class="o_agent_rank">
                                                    <span class="badge bg-primary" t-esc="agent_index + 1"/>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="text-center text-muted py-4">
                                        <i class="fa fa-users fa-3x"/>
                                        <p class="mt-2">No agent data available</p>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>

                    <!-- Most Converted Leads -->
                    <div class="col-lg-6">
                        <div class="o_dashboard_card">
                            <div class="o_card_header d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">
                                    <i class="fa fa-trophy text-success me-2"/>
                                    Most Converted Leads
                                </h5>
                                <small class="text-muted">Top converting agents</small>
                            </div>
                            <div class="o_card_body">
                                <t t-if="state.dashboardData.agent_metrics and state.dashboardData.agent_metrics.most_converted_agents">
                                    <div class="o_converted_list">
                                        <t t-foreach="state.dashboardData.agent_metrics.most_converted_agents.slice(0, 5)" t-as="agent" t-key="agent.agent_id">
                                            <div class="o_agent_item d-flex align-items-center mb-3 p-2 border rounded">
                                                <div class="o_agent_avatar me-3">
                                                    <div class="rounded-circle bg-success text-white d-flex align-items-center justify-content-center" 
                                                         style="width: 40px; height: 40px; font-size: 14px;">
                                                        <t t-esc="agent.agent_name.charAt(0).toUpperCase()"/>
                                                    </div>
                                                </div>
                                                <div class="o_agent_info flex-grow-1">
                                                    <h6 class="mb-1" t-esc="agent.agent_name"/>
                                                    <div class="d-flex justify-content-between">
                                                        <small class="text-muted">
                                                            <i class="fa fa-check-circle me-1"/>
                                                            <t t-esc="agent.won_count"/> won
                                                        </small>
                                                        <small class="text-success">
                                                            <i class="fa fa-calculator me-1"/>
                                                            Avg: <t t-esc="formatCurrency(agent.avg_deal_size)"/>
                                                        </small>
                                                    </div>
                                                </div>
                                                <div class="o_agent_rank">
                                                    <span class="badge bg-success" t-esc="agent_index + 1"/>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="text-center text-muted py-4">
                                        <i class="fa fa-trophy fa-3x"/>
                                        <p class="mt-2">No conversion data available</p>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row g-4 mt-2">
                    <!-- Most Junked Leads -->
                    <div class="col-lg-6">
                        <div class="o_dashboard_card">
                            <div class="o_card_header d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">
                                    <i class="fa fa-exclamation-triangle text-warning me-2"/>
                                    Most Junked Leads
                                </h5>
                                <small class="text-muted">Agents with most lost leads</small>
                            </div>
                            <div class="o_card_body">
                                <t t-if="state.dashboardData.lead_quality and state.dashboardData.lead_quality.most_junked_agents">
                                    <div class="o_junked_list">
                                        <t t-foreach="state.dashboardData.lead_quality.most_junked_agents.slice(0, 5)" t-as="agent" t-key="agent.agent_id">
                                            <div class="o_agent_item d-flex align-items-center mb-3 p-2 border rounded">
                                                <div class="o_agent_avatar me-3">
                                                    <div class="rounded-circle bg-warning text-white d-flex align-items-center justify-content-center" 
                                                         style="width: 40px; height: 40px; font-size: 14px;">
                                                        <t t-esc="agent.agent_name.charAt(0).toUpperCase()"/>
                                                    </div>
                                                </div>
                                                <div class="o_agent_info flex-grow-1">
                                                    <h6 class="mb-1" t-esc="agent.agent_name"/>
                                                    <div class="d-flex justify-content-between">
                                                        <small class="text-muted">
                                                            <i class="fa fa-times-circle me-1"/>
                                                            <t t-esc="agent.junked_count"/> lost
                                                        </small>
                                                        <small class="text-warning">
                                                            <i class="fa fa-info-circle me-1"/>
                                                            <t t-esc="agent.top_reason"/>
                                                        </small>
                                                    </div>
                                                </div>
                                                <div class="o_agent_rank">
                                                    <span class="badge bg-warning" t-esc="agent_index + 1"/>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="text-center text-muted py-4">
                                        <i class="fa fa-exclamation-triangle fa-3x"/>
                                        <p class="mt-2">No lost leads data available</p>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>

                    <!-- Response Time Metrics -->
                    <div class="col-lg-6">
                        <div class="o_dashboard_card">
                            <div class="o_card_header d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">
                                    <i class="fa fa-clock-o text-info me-2"/>
                                    Response Time Leaders
                                </h5>
                                <small class="text-muted">Fastest responding agents</small>
                            </div>
                            <div class="o_card_body">
                                <t t-if="state.dashboardData.response_metrics and state.dashboardData.response_metrics.fast_responders">
                                    <div class="o_response_list">
                                        <t t-foreach="state.dashboardData.response_metrics.fast_responders.slice(0, 5)" t-as="agent" t-key="agent.agent_id">
                                            <div class="o_agent_item d-flex align-items-center mb-3 p-2 border rounded">
                                                <div class="o_agent_avatar me-3">
                                                    <div class="rounded-circle bg-info text-white d-flex align-items-center justify-content-center" 
                                                         style="width: 40px; height: 40px; font-size: 14px;">
                                                        <t t-esc="agent.agent_name.charAt(0).toUpperCase()"/>
                                                    </div>
                                                </div>
                                                <div class="o_agent_info flex-grow-1">
                                                    <h6 class="mb-1" t-esc="agent.agent_name"/>
                                                    <div class="d-flex justify-content-between">
                                                        <small class="text-muted">
                                                            <i class="fa fa-clock-o me-1"/>
                                                            Avg: <t t-esc="agent.avg_response_time"/>h
                                                        </small>
                                                        <small class="text-info">
                                                            <i class="fa fa-comments me-1"/>
                                                            <t t-esc="agent.response_count"/> responses
                                                        </small>
                                                    </div>
                                                </div>
                                                <div class="o_agent_rank">
                                                    <span class="badge bg-info" t-esc="agent_index + 1"/>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="text-center text-muted py-4">
                                        <i class="fa fa-clock-o fa-3x"/>
                                        <p class="mt-2">No response time data available</p>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Response Time Comparison Section -->
                <div class="row g-4 mt-2">
                    <div class="col-lg-6">
                        <div class="o_dashboard_card">
                            <div class="o_card_header">
                                <h5 class="card-title mb-0">
                                    <i class="fa fa-tachometer text-success me-2"/>
                                    Fast Update Agents
                                </h5>
                            </div>
                            <div class="o_card_body">
                                <t t-if="state.dashboardData.response_metrics and state.dashboardData.response_metrics.fast_updaters">
                                    <div class="o_quick_stats">
                                        <t t-foreach="state.dashboardData.response_metrics.fast_updaters.slice(0, 3)" t-as="agent" t-key="agent.agent_id">
                                            <div class="d-flex justify-content-between align-items-center mb-2 p-2 bg-light rounded">
                                                <span class="fw-bold" t-esc="agent.agent_name"/>
                                                <div class="text-end">
                                                    <small class="text-success d-block">
                                                        <t t-esc="agent.avg_update_interval"/>h avg update
                                                    </small>
                                                    <small class="text-muted">
                                                        <t t-esc="agent.update_count"/> updates
                                                    </small>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="text-center text-muted py-3">
                                        <i class="fa fa-tachometer fa-2x"/>
                                        <p class="mt-2">No update data available</p>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="o_dashboard_card">
                            <div class="o_card_header">
                                <h5 class="card-title mb-0">
                                    <i class="fa fa-hourglass-half text-danger me-2"/>
                                    Slow Response Agents
                                </h5>
                            </div>
                            <div class="o_card_body">
                                <t t-if="state.dashboardData.response_metrics and state.dashboardData.response_metrics.slow_responders">
                                    <div class="o_slow_stats">
                                        <t t-foreach="state.dashboardData.response_metrics.slow_responders.slice(0, 3)" t-as="agent" t-key="agent.agent_id">
                                            <div class="d-flex justify-content-between align-items-center mb-2 p-2 bg-light rounded">
                                                <span class="fw-bold" t-esc="agent.agent_name"/>
                                                <div class="text-end">
                                                    <small class="text-danger d-block">
                                                        <t t-esc="agent.avg_response_time"/>h avg response
                                                    </small>
                                                    <small class="text-muted">
                                                        <t t-esc="agent.response_count"/> responses
                                                    </small>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="text-center text-muted py-3">
                                        <i class="fa fa-hourglass-half fa-2x"/>
                                        <p class="mt-2">No response data available</p>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer Stats -->
            <div class="o_dashboard_footer mt-4 pt-3 border-top">
                <div class="row text-center">
                    <div class="col-md-3">
                        <div class="o_footer_stat">
                            <i class="fa fa-handshake-o text-success fa-2x"/>
                            <h5 class="mt-2" t-esc="formatNumber(state.dashboardData.customer_acquisition.new_customers || 0)"/>
                            <p class="text-muted">New Customers</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="o_footer_stat">
                            <i class="fa fa-clock-o text-info fa-2x"/>
                            <h5 class="mt-2" t-esc="formatNumber(state.overdueOpportunities.length)"/>
                            <p class="text-muted">Overdue Items</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="o_footer_stat">
                            <i class="fa fa-percent text-warning fa-2x"/>
                            <h5 class="mt-2" t-esc="formatPercentage(state.dashboardData.kpis.opportunity_conversion_rate || 0)"/>
                            <p class="text-muted">Opp. Conversion</p>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="o_footer_stat">
                            <i class="fa fa-calculator text-primary fa-2x"/>
                            <h5 class="mt-2" t-esc="formatCurrency(state.dashboardData.pipeline.total_value || 0)"/>
                            <p class="text-muted">Pipeline Value</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>

</templates>
