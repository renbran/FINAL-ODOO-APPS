<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Invoice Report Template -->
        <template id="report_custom_invoice_document">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-set="o" t-value="doc.with_context(lang=lang)"/>
                    <t t-set="format_uk_date" t-value="lambda d: d.strftime('%d/%m/%Y') if d else ''"/>
                    <t t-set="format_number" t-value="lambda v: '{:,.2f}'.format(float(v)) if v else '0.00'"/>
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="container">
                                <!-- QR Code and Partner Details -->
                                <div class="row mb-4">
                                    <div class="col-6">
                                        <!-- QR Code Section -->
                                        <div style="display: flex; align-items: flex-start; height: 150px;">
                                            <t t-if="o.qr_in_report == True">
                                                <div style="width:150px; height:150px; border: 1px solid #ddd; display: flex; align-items: center; justify-content: center;">
                                                    <img t-att-src="'data:image/png;base64,' + o.qr_image.decode('utf-8')" 
                                                         style="max-width: 140px; max-height: 140px; width: auto; height: auto;" 
                                                         alt="QR Code" t-if="o.qr_image"/>
                                                </div>
                                            </t>
                                            <t t-if="not o.qr_in_report or not o.qr_image">
                                                <div style="width:150px; height:150px; border: 1px solid #ddd; display: flex; align-items: center; justify-content: center; background-color: #f8f9fa;">
                                                    <span style="color: #6c757d;">QR Code</span>
                                                </div>
                                            </t>
                                        </div>
                                    </div>
                                    <div class="col-6 text-end">
                                        <h5 style="color: #800020; font-weight: bold; font-size: 14px;">VENDOR DETAILS</h5>
                                        <div style="color: black;" t-field="o.partner_id.name"/>
                                        <div style="color: black;" t-field="o.partner_id.street"/>
                                        <t t-if="o.partner_id.street2">
                                            <div style="color: black;" t-field="o.partner_id.street2"/>
                                        </t>
                                        <div style="color: black;">
                                            <span t-field="o.partner_id.city"/>
                                            <t t-if="o.partner_id.zip">, <span t-field="o.partner_id.zip"/></t>
                                        </div>
                                        <div style="color: black;" t-field="o.partner_id.country_id.name"/>
                                        <div style="color: black;">VAT: <span t-field="o.partner_id.vat"/></div>
                                    </div>
                                </div>

                                <!-- Invoice Header -->
                                <h2 class="text-center mb-4" style="color: #800020; font-size: 18px;">TAX INVOICE <span t-field="o.name"/></h2>

                                <!-- Dates -->
                                <div class="row mb-4">
                                    <div class="col-4">
                                        <strong style="color: black;">Invoice Date:</strong> 
                                        <span style="color: black;" t-out="format_uk_date(o.invoice_date)"/>
                                    </div>
                                    <div class="col-4 text-center">
                                        <strong style="color: black;">Due Date:</strong> 
                                        <span style="color: black;" t-out="format_uk_date(o.invoice_date_due)"/>
                                    </div>
                                    <div class="col-4 text-end">
                                        <strong style="color: black;">Booking Date:</strong> 
                                        <span style="color: black;" t-out="format_uk_date(o.booking_date)"/>
                                    </div>
                                </div>

                                <!-- Line Items -->
                                <table class="table table-bordered mb-4">
                                    <thead>
                                        <tr style="background-color: #800020; color: white; font-weight: bold;">
                                            <th style="color: white;">BUYER</th>
                                            <th style="color: white;">PROJECT</th>
                                            <th style="color: white;">UNIT</th>
                                            <th class="text-end" style="color: white;">COMMISSION RATE</th>
                                            <th class="text-end" style="color: white;">UNIT PRICE</th>
                                            <th class="text-center" style="color: white;">VAT</th>
                                            <th class="text-end" style="color: white;">VAT AMOUNT</th>
                                            <th class="text-end" style="color: white;">AMOUNT</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td style="color: black;"><span t-field="o.buyer_id.name"/></td>
                                            <td style="color: black;"><span t-field="o.project_id.name"/></td>
                                            <td style="color: black;"><span t-field="o.unit_id.name"/></td>
                                            <td class="text-end" style="color: black;">
                                                <t t-if="o.invoice_line_ids">
                                                    <span t-esc="format_number(o.invoice_line_ids[0].quantity * 100)"/>%
                                                </t>
                                                <t t-else="">0.00%</t>
                                            </td>
                                            <td class="text-end" style="color: black;">
                                                <span t-esc="format_number(o.sale_value)"/> AED
                                            </td>
                                            <td class="text-center" style="color: black;">5%</td>
                                            <td class="text-end" style="color: black;">
                                                <span t-esc="format_number(o.amount_tax)"/> AED
                                            </td>
                                            <td class="text-end" style="color: black;">
                                                <span t-esc="format_number(o.amount_total)"/> AED
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                                <!-- Totals - All rows with burgundy background -->
                                <div class="row justify-content-end">
                                    <div class="col-5">
                                        <table style="width: 100%; border-collapse: collapse;">
                                            <tr style="background-color: #800020; color: white; font-weight: bold;">
                                                <td style="border: 1px solid #ddd; padding: 8px;">Untaxed Amount</td>
                                                <td style="border: 1px solid #ddd; padding: 8px; text-align: right;">
                                                    <span t-esc="format_number(o.amount_untaxed)"/> AED
                                                </td>
                                            </tr>
                                            <tr style="background-color: #800020; color: white; font-weight: bold;">
                                                <td style="border: 1px solid #ddd; padding: 8px;">Tax</td>
                                                <td style="border: 1px solid #ddd; padding: 8px; text-align: right;">
                                                    <span t-esc="format_number(o.amount_tax)"/> AED
                                                </td>
                                            </tr>
                                            <tr style="background-color: #800020; color: white; font-weight: bold;">
                                                <td style="border: 1px solid #ddd; padding: 8px;">Total</td>
                                                <td style="border: 1px solid #ddd; padding: 8px; text-align: right;">
                                                    <span t-esc="format_number(o.amount_total)"/> AED
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>

                                <!-- Amount in Words -->
                                <div class="mb-4" style="color: black;">
                                    <strong>Amount in Words (Total):</strong>
                                    <span t-field="o.amount_total_words"/>
                                </div>

                                <!-- Payment Instructions -->
                                <div class="mb-4">
                                    <h4 style="color: #800020;">Payment Instructions</h4>
                                    <p style="color: black;">Please pay to this Account Details in Cheque or Bank Transfer</p>
                                    <table style="width: 100%; border-collapse: collapse;">
                                        <tr>
                                            <td style="width: 30%; color: black; font-weight: bold; padding: 4px;">Bank Name</td>
                                            <td style="color: black; padding: 4px;">ABU DHABI COMMERCIAL BANK (ADCB)</td>
                                        </tr>
                                        <tr>
                                            <td style="color: black; font-weight: bold; padding: 4px;">Account Name</td>
                                            <td style="color: black; padding: 4px;">OSUS REAL ESTATE BROKERAGE LLC</td>
                                        </tr>
                                        <tr>
                                            <td style="color: black; font-weight: bold; padding: 4px;">Account No.</td>
                                            <td style="color: black; padding: 4px;">14041417820001 - AED</td>
                                        </tr>
                                        <tr>
                                            <td style="color: black; font-weight: bold; padding: 4px;">IBAN</td>
                                            <td style="color: black; padding: 4px;">AE35003001404141782000</td>
                                        </tr>
                                        <tr>
                                            <td style="color: black; font-weight: bold; padding: 4px;">Branch</td>
                                            <td style="color: black; padding: 4px;">Business Bay</td>
                                        </tr>
                                    </table>
                                    <p class="fst-italic" style="color: black; margin-top: 8px;">Please include your reference number when making the payment</p>
                                </div>

                                <!-- Footer with larger disclaimer -->
                                <div class="text-center" style="color: black; font-size: 13px; margin-top: 20px; border-top: 1px solid #eee; padding-top: 10px; font-weight: bold;">
                                    This is a computer generated document. No signature or stamp required.
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <!-- Bill Report Template -->
        <template id="report_custom_bill">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-set="o" t-value="doc.with_context(lang=lang)"/>
                    <t t-set="format_uk_date" t-value="lambda d: d.strftime('%d/%m/%Y') if d else ''"/>
                    <t t-set="format_number" t-value="lambda v: '{:,.2f}'.format(float(v)) if v else '0.00'"/>
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="container">
                                <!-- Bill Header -->
                                <h2 class="text-center mb-4" style="color: #800020; font-size: 18px;">BILL <span t-field="o.name"/></h2>
                                
                                <!-- Bill Content - Similar structure to invoice -->
                                <div class="row mb-4">
                                    <div class="col-6">
                                        <h5 style="color: #800020; font-weight: bold;">VENDOR DETAILS</h5>
                                        <div t-field="o.partner_id.name"/>
                                        <div t-field="o.partner_id.street"/>
                                        <t t-if="o.partner_id.street2">
                                            <div t-field="o.partner_id.street2"/>
                                        </t>
                                        <div>
                                            <span t-field="o.partner_id.city"/>
                                            <t t-if="o.partner_id.zip">, <span t-field="o.partner_id.zip"/></t>
                                        </div>
                                        <div t-field="o.partner_id.country_id.name"/>
                                        <div>VAT: <span t-field="o.partner_id.vat"/></div>
                                    </div>
                                    <div class="col-6 text-end">
                                        <h5 style="color: #800020; font-weight: bold;">BILL DETAILS</h5>
                                        <div><strong>Date:</strong> <span t-field="o.invoice_date" t-options="{'widget': 'date', 'format': 'dd/MM/yyyy'}"/></div>
                                        <div><strong>Due Date:</strong> <span t-field="o.invoice_date_due" t-options="{'widget': 'date', 'format': 'dd/MM/yyyy'}"/></div>
                                    </div>
                                </div>

                                <!-- Bill Items Table -->
                                <table class="table table-bordered">
                                    <thead style="background-color: #f8f9fa;">
                                        <tr>
                                            <th>Description</th>
                                            <th class="text-end">Quantity</th>
                                            <th class="text-end">Unit Price</th>
                                            <th class="text-end">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="o.invoice_line_ids" t-as="line">
                                            <tr>
                                                <td><span t-field="line.name"/></td>
                                                <td class="text-end"><span t-field="line.quantity"/></td>
                                                <td class="text-end"><span t-field="line.price_unit" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/></td>
                                                <td class="text-end"><span t-field="line.price_subtotal" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>

                                <!-- Bill Totals -->
                                <div class="row">
                                    <div class="col-6"></div>
                                    <div class="col-6">
                                        <table class="table table-sm">
                                            <tr>
                                                <td><strong>Subtotal:</strong></td>
                                                <td class="text-end"><span t-field="o.amount_untaxed" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/></td>
                                            </tr>
                                            <tr>
                                                <td><strong>Tax:</strong></td>
                                                <td class="text-end"><span t-field="o.amount_tax" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/></td>
                                            </tr>
                                            <tr style="border-top: 2px solid #000;">
                                                <td><strong>Total:</strong></td>
                                                <td class="text-end"><strong><span t-field="o.amount_total" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/></strong></td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>

        <!-- Receipt Report Template -->
        <template id="report_custom_receipt">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-set="o" t-value="doc.with_context(lang=lang)"/>
                    <t t-set="format_uk_date" t-value="lambda d: d.strftime('%d/%m/%Y') if d else ''"/>
                    <t t-set="format_number" t-value="lambda v: '{:,.2f}'.format(float(v)) if v else '0.00'"/>
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="container">
                                <!-- Receipt Header -->
                                <h2 class="text-center mb-4" style="color: #800020; font-size: 18px;">RECEIPT <span t-field="o.name"/></h2>
                                
                                <!-- Receipt Content -->
                                <div class="row mb-4">
                                    <div class="col-6">
                                        <h5 style="color: #800020; font-weight: bold;">CUSTOMER DETAILS</h5>
                                        <div t-field="o.partner_id.name"/>
                                        <div t-field="o.partner_id.street"/>
                                        <t t-if="o.partner_id.street2">
                                            <div t-field="o.partner_id.street2"/>
                                        </t>
                                        <div>
                                            <span t-field="o.partner_id.city"/>
                                            <t t-if="o.partner_id.zip">, <span t-field="o.partner_id.zip"/></t>
                                        </div>
                                        <div t-field="o.partner_id.country_id.name"/>
                                    </div>
                                    <div class="col-6 text-end">
                                        <h5 style="color: #800020; font-weight: bold;">RECEIPT DETAILS</h5>
                                        <div><strong>Date:</strong> <span t-field="o.invoice_date" t-options="{'widget': 'date', 'format': 'dd/MM/yyyy'}"/></div>
                                        <div><strong>Payment Method:</strong> <span t-field="o.payment_reference"/></div>
                                    </div>
                                </div>

                                <!-- Receipt Items -->
                                <table class="table table-bordered">
                                    <thead style="background-color: #f8f9fa;">
                                        <tr>
                                            <th>Description</th>
                                            <th class="text-end">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="o.invoice_line_ids" t-as="line">
                                            <tr>
                                                <td><span t-field="line.name"/></td>
                                                <td class="text-end"><span t-field="line.price_subtotal" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/></td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>

                                <!-- Receipt Total -->
                                <div class="row">
                                    <div class="col-6"></div>
                                    <div class="col-6">
                                        <table class="table table-sm">
                                            <tr style="border-top: 2px solid #000;">
                                                <td><strong>Total Received:</strong></td>
                                                <td class="text-end"><strong><span t-field="o.amount_total" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/></strong></td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>

                                <!-- Receipt Footer -->
                                <div class="text-center mt-4">
                                    <p style="color: #800020; font-weight: bold;">Thank you for your payment!</p>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>