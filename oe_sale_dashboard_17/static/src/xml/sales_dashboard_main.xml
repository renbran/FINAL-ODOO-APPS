<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="oe_sale_dashboard_17.SalesDashboard">
        <div class="o_oe_sale_dashboard_17_container sales_dashboard_container">
            <!-- Loading Indicator -->
            <div class="loading_indicator" t-if="state.loading">
                <i class="fa fa-spinner fa-spin fa-3x" title="Loading spinner"></i>
                <p>Loading dashboard data...</p>
            </div>

            <!-- Dashboard Content -->
            <div class="dashboard_content" t-if="!state.loading">
                <!-- Header Section -->
                <div class="dashboard_header">
                    <div class="row">
                        <div class="col-md-8">
                            <h2>Sales Dashboard</h2>
                            <p>Real-time sales analytics and performance metrics</p>
                        </div>
                        <div class="col-md-4">
                            <div class="dashboard_filters">
                                <div class="form-group">
                                    <label>Date Range:</label>
                                    <div class="input-group">
                                        <input type="date" id="start_date" class="form-control" t-model="state.dateRange.start"/>
                                        <input type="date" id="end_date" class="form-control" t-model="state.dateRange.end"/>
                                        <button class="btn btn-primary" id="refresh_dashboard" t-on-click="refreshData">
                                            <i class="fa fa-refresh" title="Refresh dashboard"></i> Refresh
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- KPI Cards Section -->
                <div class="kpi_section mb-4">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="kpi_card">
                                <div class="kpi_icon">
                                    <i class="fa fa-file-text-o" title="Total Quotations Icon"></i>
                                </div>
                                <div class="kpi_content">
                                    <h3 id="total_quotations"><t t-esc="state.data.performance.total_quotations or 0"/></h3>
                                    <p>Total Quotations</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="kpi_card">
                                <div class="kpi_icon">
                                    <i class="fa fa-shopping-cart" title="Sales Orders Icon"></i>
                                </div>
                                <div class="kpi_content">
                                    <h3 id="total_orders"><t t-esc="state.data.performance.total_orders or 0"/></h3>
                                    <p>Sales Orders</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="kpi_card">
                                <div class="kpi_icon">
                                    <i class="fa fa-check-circle" title="Invoiced Sales Icon"></i>
                                </div>
                                <div class="kpi_content">
                                    <h3 id="total_invoiced"><t t-esc="state.data.performance.total_invoiced or 0"/></h3>
                                    <p>Invoiced Sales</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="kpi_card">
                                <div class="kpi_icon">
                                    <i class="fa fa-money" title="Total Revenue Icon"></i>
                                </div>
                                <div class="kpi_content">
                                    <h3 id="total_amount"><t t-esc="state.data.performance.total_amount or '0'"/></h3>
                                    <p>Total Revenue</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts_section">
                    <div class="row">
                        <!-- Monthly Trend Chart -->
                        <div class="col-md-8">
                            <div class="chart_container">
                                <div class="chart_header">
                                    <h4>Monthly Sales Trend</h4>
                                    <p>Track sales performance over time</p>
                                </div>
                                <div class="chart_body" style="height: 300px;">
                                    <canvas id="monthly_trend_chart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sales by State Pie Chart -->
                        <div class="col-md-4">
                            <div class="chart_container">
                                <div class="chart_header">
                                    <h4>Sales by State</h4>
                                    <p>Distribution of sales stages</p>
                                </div>
                                <div class="chart_body" style="height: 300px;">
                                    <canvas id="sales_state_chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-4">
                        <!-- Top Customers Chart -->
                        <div class="col-md-6">
                            <div class="chart_container">
                                <div class="chart_header">
                                    <h4>Top Customers</h4>
                                    <p>Best performing customers by revenue</p>
                                </div>
                                <div class="chart_body" style="height: 300px;">
                                    <canvas id="top_customers_chart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sales Team Performance -->
                        <div class="col-md-6">
                            <div class="chart_container">
                                <div class="chart_header">
                                    <h4>Sales Team Performance</h4>
                                    <p>Individual salesperson performance</p>
                                </div>
                                <div class="chart_body" style="height: 300px;">
                                    <canvas id="sales_team_chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Metrics Section -->
                <div class="metrics_section mt-4">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="metrics_container">
                                <h4>Performance Metrics</h4>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="metric_item">
                                            <div class="metric_label">Conversion Rate</div>
                                            <div class="metric_value" id="conversion_rate">0%</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="metric_item">
                                            <div class="metric_label">Invoiced Amount</div>
                                            <div class="metric_value" id="invoiced_amount">0</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="metric_item">
                                            <div class="metric_label">Average Order Value</div>
                                            <div class="metric_value" id="avg_order_value">0</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>
