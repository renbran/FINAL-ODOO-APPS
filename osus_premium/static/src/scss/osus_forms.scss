// OSUS Properties - Luxury Form Styles
// Premium form components for Odoo17
// ==================================

@import "osus_variables";

// BASE FORM STYLING
// =================
.form-control,
.o_input {
  border: 2px solid rgba($osus-gold-medium, 0.3);
  border-radius: $osus-border-radius-lg;
  padding: $osus-spacing-md $osus-spacing-lg;
  font-family: $osus-font-family-primary;
  font-weight: $osus-font-weight-regular;
  font-size: $osus-font-size-base;
  height: $osus-input-height;
  background: $osus-white;
  color: $osus-dark-gray;
  transition: all $osus-transition-standard;
  box-shadow: inset 0 2px 4px rgba($osus-burgundy-primary, 0.05);

  &:focus {
    outline: none;
    border-color: $osus-burgundy-medium;
    box-shadow: inset 0 2px 4px rgba($osus-burgundy-primary, 0.05),
      0 0 0 3px rgba($osus-burgundy-medium, 0.1), $osus-shadow-sm;
    background: lighten($osus-gold-primary, 8%);
  }

  &:hover:not(:focus) {
    border-color: $osus-gold-medium;
    background: lighten($osus-gold-primary, 5%);
  }

  &::placeholder {
    color: $osus-gray;
    font-style: italic;
    opacity: 0.8;
  }

  &:invalid {
    border-color: $osus-danger;
    background: lighten($osus-danger, 45%);
  }

  &:valid {
    border-color: $osus-success;
  }

  &:disabled,
  &[readonly] {
    background: $osus-light-gray;
    border-color: $osus-gray;
    color: $osus-gray;
    cursor: not-allowed;
  }
}

// FLOATING LABELS - LUXURY STYLE
// ===============================
.form-floating {
  position: relative;

  .form-control {
    padding: $osus-spacing-lg $osus-spacing-lg $osus-spacing-sm;

    &:focus ~ label,
    &:not(:placeholder-shown) ~ label {
      transform: scale(0.85) translateY(-2.5rem);
      color: $osus-burgundy-medium;
      font-weight: $osus-font-weight-semibold;
    }
  }

  label {
    position: absolute;
    top: 0;
    left: $osus-spacing-lg;
    padding: $osus-spacing-md 0;
    color: $osus-gray;
    font-weight: $osus-font-weight-medium;
    transition: all $osus-transition-standard;
    transform-origin: left;
    pointer-events: none;
    background: $osus-white;
    padding: 0 $osus-spacing-sm;
    margin-top: $osus-spacing-md;
  }
}

// FORM GROUPS - LUXURY SPACING
// =============================
.form-group,
.o_field_widget {
  margin-bottom: $osus-spacing-lg;

  label {
    font-weight: $osus-font-weight-semibold;
    color: $osus-burgundy-primary;
    margin-bottom: $osus-spacing-sm;
    font-size: $osus-font-size-sm;
    text-transform: uppercase;
    letter-spacing: 0.5px;

    &.required::after {
      content: " *";
      color: $osus-danger;
      font-weight: $osus-font-weight-bold;
    }
  }

  .form-text {
    color: $osus-gray;
    font-size: $osus-font-size-sm;
    margin-top: $osus-spacing-xs;
    font-style: italic;
  }

  // Error state styling
  &.has-error {
    .form-control,
    .o_input {
      border-color: $osus-danger;
      background: lighten($osus-danger, 45%);
    }

    label {
      color: $osus-danger;
    }

    .invalid-feedback {
      display: block;
      color: $osus-danger;
      font-size: $osus-font-size-sm;
      font-weight: $osus-font-weight-medium;
      margin-top: $osus-spacing-xs;
    }
  }

  // Success state styling
  &.has-success {
    .form-control,
    .o_input {
      border-color: $osus-success;
    }

    label {
      color: $osus-success;
    }
  }
}

// SELECT DROPDOWNS - LUXURY STYLING
// =================================
.form-select,
select.form-control {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23#{str-slice(#{$osus-burgundy-primary}, 2)}' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right $osus-spacing-md center;
  background-size: 16px 12px;
  padding-right: calc($osus-spacing-lg + 24px);
  cursor: pointer;

  &:focus {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23#{str-slice(#{$osus-burgundy-medium}, 2)}' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
  }

  option {
    padding: $osus-spacing-sm;
    color: $osus-dark-gray;

    &:checked {
      background: $osus-burgundy-gradient;
      color: $osus-white;
    }
  }
}

// CHECKBOXES - LUXURY CUSTOM STYLING
// ===================================
.form-check {
  display: flex;
  align-items: center;
  margin-bottom: $osus-spacing-md;

  .form-check-input {
    width: 20px;
    height: 20px;
    border: 2px solid $osus-burgundy-medium;
    border-radius: $osus-border-radius-sm;
    background: $osus-white;
    cursor: pointer;
    transition: all $osus-transition-standard;
    position: relative;
    margin-right: $osus-spacing-md;

    &:checked {
      background: $osus-burgundy-gradient;
      border-color: $osus-burgundy-primary;

      &::after {
        content: "âœ“";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: $osus-white;
        font-weight: $osus-font-weight-bold;
        font-size: 12px;
      }
    }

    &:hover {
      border-color: $osus-burgundy-primary;
      box-shadow: 0 0 0 3px rgba($osus-burgundy-medium, 0.1);
    }

    &:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba($osus-burgundy-medium, 0.3);
    }
  }

  .form-check-label {
    color: $osus-dark-gray;
    font-weight: $osus-font-weight-medium;
    cursor: pointer;

    &:hover {
      color: $osus-burgundy-primary;
    }
  }
}

// RADIO BUTTONS - LUXURY CUSTOM STYLING
// ======================================
.form-check {
  .form-check-input[type="radio"] {
    border-radius: 50%;

    &:checked {
      background: $osus-white;
      border-color: $osus-burgundy-primary;

      &::after {
        content: "";
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: $osus-burgundy-primary;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
    }
  }
}

// RANGE SLIDERS - LUXURY STYLING
// ===============================
.form-range {
  height: 8px;
  background: $osus-light-gray;
  border-radius: $osus-border-radius-curved;
  outline: none;

  &::-webkit-slider-thumb {
    appearance: none;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: $osus-burgundy-gradient;
    cursor: pointer;
    border: 2px solid $osus-white;
    box-shadow: $osus-shadow-md;
    transition: all $osus-transition-fast;

    &:hover {
      transform: scale(1.1);
      box-shadow: $osus-shadow-lg;
    }
  }

  &::-moz-range-thumb {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: $osus-burgundy-gradient;
    cursor: pointer;
    border: 2px solid $osus-white;
    box-shadow: $osus-shadow-md;
  }
}

// FILE UPLOAD - LUXURY STYLING
// =============================
.form-control[type="file"] {
  padding: $osus-spacing-sm;

  &::file-selector-button {
    background: $osus-gold-gradient;
    color: $osus-burgundy-primary;
    border: none;
    border-radius: $osus-border-radius-md;
    padding: $osus-spacing-sm $osus-spacing-md;
    margin-right: $osus-spacing-md;
    font-weight: $osus-font-weight-semibold;
    cursor: pointer;
    transition: all $osus-transition-fast;

    &:hover {
      background: linear-gradient(
        135deg,
        $osus-gold-medium 0%,
        $osus-gold-dark 100%
      );
      transform: translateY(-1px);
    }
  }
}

// TEXTAREA - LUXURY STYLING
// ==========================
.form-control[rows],
textarea.form-control {
  min-height: 120px;
  resize: vertical;
  line-height: 1.6;

  &:focus {
    min-height: 140px;
  }
}

// INPUT GROUPS - LUXURY STYLING
// ==============================
.input-group {
  .input-group-text {
    background: $osus-offwhite-burgundy-gradient;
    border: 2px solid rgba($osus-gold-medium, 0.3);
    color: $osus-burgundy-primary;
    font-weight: $osus-font-weight-semibold;

    &:first-child {
      border-radius: $osus-border-radius-lg 0 0 $osus-border-radius-lg;
    }

    &:last-child {
      border-radius: 0 $osus-border-radius-lg $osus-border-radius-lg 0;
    }
  }

  .form-control {
    border-left: none;
    border-right: none;
    border-radius: 0;

    &:first-child {
      border-left: 2px solid rgba($osus-gold-medium, 0.3);
      border-radius: $osus-border-radius-lg 0 0 $osus-border-radius-lg;
    }

    &:last-child {
      border-right: 2px solid rgba($osus-gold-medium, 0.3);
      border-radius: 0 $osus-border-radius-lg $osus-border-radius-lg 0;
    }

    &:focus {
      border-color: $osus-burgundy-medium;
      z-index: 3;
    }
  }
}

// FORM VALIDATION STYLING
// ========================
.was-validated {
  .form-control:valid {
    border-color: $osus-success;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23#{str-slice(#{$osus-success}, 2)}' d='m2.3 6.73.76.04.43-.43L8 1.87l-.67-.67L2.8 5.73l-.12-.12L1.5 6.8z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right calc(0.375em + 0.1875rem) center;
    background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
  }

  .form-control:invalid {
    border-color: $osus-danger;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23#{str-slice(#{$osus-danger}, 2)}'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath d='m5.8 5.8 4.4 4.4'/%3e%3cpath d='m10.2 5.8-4.4 4.4'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right calc(0.375em + 0.1875rem) center;
    background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);
  }
}

// FORM WIZARD STYLING
// ===================
.form-wizard {
  .wizard-steps {
    display: flex;
    justify-content: space-between;
    margin-bottom: $osus-spacing-xl;

    .wizard-step {
      flex: 1;
      text-align: center;
      position: relative;

      &:not(:last-child)::after {
        content: "";
        position: absolute;
        top: 20px;
        right: -50%;
        width: 100%;
        height: 2px;
        background: $osus-light-gray;
        z-index: 1;
      }

      &.active::after {
        background: $osus-burgundy-medium;
      }

      .step-number {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: $osus-light-gray;
        color: $osus-gray;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto $osus-spacing-sm;
        font-weight: $osus-font-weight-bold;
        transition: all $osus-transition-standard;
        position: relative;
        z-index: 2;
      }

      .step-title {
        font-weight: $osus-font-weight-semibold;
        color: $osus-gray;
        font-size: $osus-font-size-sm;
      }

      &.active {
        .step-number {
          background: $osus-burgundy-gradient;
          color: $osus-white;
          transform: scale(1.1);
          box-shadow: $osus-shadow-md;
        }

        .step-title {
          color: $osus-burgundy-primary;
        }
      }

      &.completed {
        .step-number {
          background: $osus-success;
          color: $osus-white;

          &::after {
            content: "âœ“";
            font-size: 14px;
          }
        }

        .step-title {
          color: $osus-success;
        }
      }
    }
  }
}

// ODOO SPECIFIC FORM OVERRIDES
// =============================

// Odoo field widgets
.o_field_widget {
  &.o_field_many2one {
    .o_input_dropdown {
      border-radius: $osus-border-radius-lg;
      overflow: hidden;
    }

    .o_external_button {
      background: $osus-gold-gradient;
      border: none;
      color: $osus-burgundy-primary;
      border-radius: 0 $osus-border-radius-lg $osus-border-radius-lg 0;

      &:hover {
        background: linear-gradient(
          135deg,
          $osus-gold-medium 0%,
          $osus-gold-dark 100%
        );
      }
    }
  }

  &.o_field_boolean {
    .form-check-input {
      transform: scale(1.2);
    }
  }

  &.o_field_date,
  &.o_field_datetime {
    .o_datepicker_input {
      border-radius: $osus-border-radius-lg;
    }

    .o_datepicker_button {
      background: $osus-burgundy-gradient;
      border: none;
      color: $osus-white;
      border-radius: 0 $osus-border-radius-lg $osus-border-radius-lg 0;

      &:hover {
        background: linear-gradient(
          135deg,
          $osus-burgundy-medium 0%,
          $osus-burgundy-dark 100%
        );
      }
    }
  }
}

// Form sheet styling
.o_form_sheet {
  .o_group {
    margin-bottom: $osus-spacing-xl;

    .o_td_label {
      label {
        font-weight: $osus-font-weight-semibold;
        color: $osus-burgundy-primary;
        margin-bottom: $osus-spacing-sm;
      }
    }
  }

  .oe_title {
    h1,
    h2,
    h3 {
      color: $osus-burgundy-primary;
      font-weight: $osus-font-weight-bold;
      margin-bottom: $osus-spacing-lg;
    }
  }

  .oe_button_box {
    .oe_stat_button {
      background: lighten($osus-gold-primary, 3%);
      border: 1px solid rgba($osus-gold-medium, 0.3);
      border-radius: $osus-border-radius-lg;
      transition: all $osus-transition-standard;

      &:hover {
        background: $osus-offwhite-burgundy-gradient;
        transform: translateY(-2px);
        box-shadow: $osus-shadow-sm;
      }
    }
  }
}

// Search panel form styling
.o_search_panel {
  .o_search_panel_field {
    .form-control {
      border-radius: $osus-border-radius-lg;
      margin-bottom: $osus-spacing-sm;
    }
  }
}

// RESPONSIVE FORM ADJUSTMENTS
// ===========================
@media (max-width: $osus-breakpoint-md) {
  .form-control,
  .o_input {
    height: 40px;
    padding: $osus-spacing-sm $osus-spacing-md;
    font-size: $osus-font-size-sm;
  }

  .form-floating label {
    font-size: $osus-font-size-sm;
  }

  .form-wizard .wizard-steps {
    flex-direction: column;

    .wizard-step {
      margin-bottom: $osus-spacing-lg;

      &:not(:last-child)::after {
        display: none;
      }
    }
  }
}

@media (max-width: $osus-breakpoint-sm) {
  .input-group {
    flex-direction: column;

    .input-group-text,
    .form-control {
      border-radius: $osus-border-radius-lg !important;
      border: 2px solid rgba($osus-gold-medium, 0.3) !important;
      margin-bottom: $osus-spacing-xs;
    }
  }
}
